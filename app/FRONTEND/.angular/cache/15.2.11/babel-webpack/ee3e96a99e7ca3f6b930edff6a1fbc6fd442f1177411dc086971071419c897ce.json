{"ast":null,"code":"import { SolicitudesModificacionCliente } from 'src/app/Modelo/SolicitudesModificacionCliente';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"src/app/Service/clientes.service\";\nimport * as i2 from \"@angular/common\";\nimport * as i3 from \"@angular/forms\";\nfunction SolicitudesModificacionClienteComponent_div_0_option_23_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"option\", 31);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const c_r5 = ctx.$implicit;\n    i0.ɵɵproperty(\"value\", c_r5.identificacion);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate2(\" \", c_r5.identificacion, \": \", c_r5.nombre, \" \");\n  }\n}\nfunction SolicitudesModificacionClienteComponent_div_0_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r7 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 2)(1, \"div\", 3)(2, \"div\", 4)(3, \"div\", 5)(4, \"nav\", 6)(5, \"h3\", 7);\n    i0.ɵɵtext(6, \"Nueva solicitud\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(7, \"div\", 8)(8, \"label\", 9);\n    i0.ɵɵtext(9);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(10, \"div\", 10)(11, \"div\", 11)(12, \"input\", 12);\n    i0.ɵɵlistener(\"ngModelChange\", function SolicitudesModificacionClienteComponent_div_0_Template_input_ngModelChange_12_listener($event) {\n      i0.ɵɵrestoreView(_r7);\n      const ctx_r6 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r6.claveBusqueda = $event);\n    })(\"input\", function SolicitudesModificacionClienteComponent_div_0_Template_input_input_12_listener() {\n      i0.ɵɵrestoreView(_r7);\n      const ctx_r8 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r8.searchClientes(ctx_r8.claveBusqueda));\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(13, \"div\", 13)(14, \"span\", 14);\n    i0.ɵɵelement(15, \"i\", 15);\n    i0.ɵɵelementEnd()()()()();\n    i0.ɵɵelementStart(16, \"div\", 16)(17, \"form\", 17, 18);\n    i0.ɵɵlistener(\"ngSubmit\", function SolicitudesModificacionClienteComponent_div_0_Template_form_ngSubmit_17_listener() {\n      i0.ɵɵrestoreView(_r7);\n      const _r2 = i0.ɵɵreference(18);\n      const ctx_r9 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r9.guardarNuevaSolicitud(_r2));\n    });\n    i0.ɵɵelementStart(19, \"div\", 19)(20, \"label\", 20);\n    i0.ɵɵtext(21, \"Seleccione el cliente que desee modificar\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(22, \"select\", 21);\n    i0.ɵɵlistener(\"ngModelChange\", function SolicitudesModificacionClienteComponent_div_0_Template_select_ngModelChange_22_listener($event) {\n      i0.ɵɵrestoreView(_r7);\n      const ctx_r10 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r10.cliente = $event);\n    });\n    i0.ɵɵtemplate(23, SolicitudesModificacionClienteComponent_div_0_option_23_Template, 2, 3, \"option\", 22);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelement(24, \"br\");\n    i0.ɵɵelementStart(25, \"div\", 19)(26, \"label\", 23);\n    i0.ɵɵtext(27, \"Ingrese una descripcion:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(28, \"input\", 24, 25);\n    i0.ɵɵlistener(\"ngModelChange\", function SolicitudesModificacionClienteComponent_div_0_Template_input_ngModelChange_28_listener($event) {\n      i0.ɵɵrestoreView(_r7);\n      const ctx_r11 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r11.descripcion = $event);\n    });\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelement(30, \"br\");\n    i0.ɵɵelementStart(31, \"div\", 26)(32, \"button\", 27);\n    i0.ɵɵelement(33, \"i\", 28);\n    i0.ɵɵtext(34, \" Guardar \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(35, \"button\", 29);\n    i0.ɵɵlistener(\"click\", function SolicitudesModificacionClienteComponent_div_0_Template_button_click_35_listener() {\n      i0.ɵɵrestoreView(_r7);\n      const _r2 = i0.ɵɵreference(18);\n      const ctx_r12 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r12.mostrarNuevaSolicitud = false && _r2.resetForm());\n    });\n    i0.ɵɵelement(36, \"i\", 30);\n    i0.ɵɵtext(37, \" Cancelar\");\n    i0.ɵɵelementEnd()()()()()()()();\n  }\n  if (rf & 2) {\n    const _r2 = i0.ɵɵreference(18);\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(9);\n    i0.ɵɵtextInterpolate1(\"B\\u00FAsqueda totales: \", ctx_r0.clientes.length, \"\");\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"ngModel\", ctx_r0.claveBusqueda);\n    i0.ɵɵadvance(10);\n    i0.ɵɵproperty(\"ngModel\", ctx_r0.cliente);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r0.clientes);\n    i0.ɵɵadvance(5);\n    i0.ɵɵproperty(\"ngModel\", ctx_r0.descripcion);\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"disabled\", !_r2.form.valid);\n  }\n}\nfunction SolicitudesModificacionClienteComponent_div_1_tr_35_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"tr\")(1, \"td\");\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"td\");\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"td\");\n    i0.ɵɵtext(6);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"td\");\n    i0.ɵɵtext(8);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(9, \"td\");\n    i0.ɵɵtext(10);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(11, \"td\", 26)(12, \"button\", 40);\n    i0.ɵɵelement(13, \"i\", 41);\n    i0.ɵɵtext(14, \" Editar\");\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const s_r14 = ctx.$implicit;\n    const ctx_r13 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(s_r14.id);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(s_r14.cliente);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(s_r14.n_cliente);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(s_r14.descripcion);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(ctx_r13.getEstadoSolicitud(s_r14.aprobacion));\n  }\n}\nfunction SolicitudesModificacionClienteComponent_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r17 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 32)(1, \"div\", 33)(2, \"h3\");\n    i0.ɵɵtext(3);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"div\", 34)(5, \"button\", 35);\n    i0.ɵɵlistener(\"click\", function SolicitudesModificacionClienteComponent_div_1_Template_button_click_5_listener() {\n      i0.ɵɵrestoreView(_r17);\n      const ctx_r16 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r16.NuevaSolicitud());\n    });\n    i0.ɵɵelement(6, \"i\", 36);\n    i0.ɵɵtext(7, \" Agregar \");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelement(8, \"br\");\n    i0.ɵɵelementStart(9, \"div\", 8)(10, \"label\", 9);\n    i0.ɵɵtext(11);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(12, \"div\", 10)(13, \"div\", 11)(14, \"input\", 37);\n    i0.ɵɵlistener(\"ngModelChange\", function SolicitudesModificacionClienteComponent_div_1_Template_input_ngModelChange_14_listener($event) {\n      i0.ɵɵrestoreView(_r17);\n      const ctx_r18 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r18.claveBusquedaSolicitud = $event);\n    })(\"input\", function SolicitudesModificacionClienteComponent_div_1_Template_input_input_14_listener() {\n      i0.ɵɵrestoreView(_r17);\n      const ctx_r19 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r19.searchSolicitudes(ctx_r19.claveBusquedaSolicitud));\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(15, \"div\", 13)(16, \"span\", 14);\n    i0.ɵɵelement(17, \"i\", 15);\n    i0.ɵɵelementEnd()()()()();\n    i0.ɵɵelement(18, \"br\");\n    i0.ɵɵelementStart(19, \"table\", 38)(20, \"thead\")(21, \"tr\")(22, \"th\");\n    i0.ɵɵtext(23, \"Codigo\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(24, \"th\");\n    i0.ɵɵtext(25, \"Id cliente\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(26, \"th\");\n    i0.ɵɵtext(27, \"Nombre cliente\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(28, \"th\");\n    i0.ɵɵtext(29, \"Descripcion\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(30, \"th\");\n    i0.ɵɵtext(31, \"Estado\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(32, \"th\", 26);\n    i0.ɵɵtext(33, \"ACCIONES\");\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(34, \"tbody\");\n    i0.ɵɵtemplate(35, SolicitudesModificacionClienteComponent_div_1_tr_35_Template, 15, 5, \"tr\", 39);\n    i0.ɵɵelementEnd()()()();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate1(\"Totales (\", ctx_r1.solicitudes.length, \") \");\n    i0.ɵɵadvance(8);\n    i0.ɵɵtextInterpolate1(\"B\\u00FAsqueda totales: \", ctx_r1.solicitudes.length, \"\");\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"ngModel\", ctx_r1.claveBusquedaSolicitud);\n    i0.ɵɵadvance(21);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r1.solicitudes);\n  }\n}\nexport class SolicitudesModificacionClienteComponent {\n  constructor(servicioClientes) {\n    this.servicioClientes = servicioClientes;\n    this.mostrarNuevaSolicitud = false;\n  }\n  ngOnInit() {\n    this.servicioClientes.getClientes(this.getRolDB()).subscribe(data => {\n      this.clientes = data;\n      this.clientesT = data;\n      this.llamarSolicitudes();\n    }, error => {\n      console.log(error);\n    });\n  }\n  llamarSolicitudes() {\n    this.servicioClientes.getSolicitudesClientesModificacion(this.getRolDB(), this.getIdUser()).subscribe(data => {\n      this.solicitudes = data;\n      this.solicitudesT = data;\n    });\n  }\n  guardarNuevaSolicitud(solicitudModificacionClienteForm) {\n    let s = new SolicitudesModificacionCliente(1, this.getIdUser(), \"\", \"\", \"\", this.getSucursal(), this.cliente, this.descripcion, false);\n    this.servicioClientes.postCgetSolicitudesClientesModificacionliente(s, this.getRolDB()).subscribe(data => {\n      alert(\"Se ha enviado la solicitud con exito!!!\");\n      this.mostrarNuevaSolicitud = false;\n      solicitudModificacionClienteForm.resetForm();\n      this.ngOnInit();\n    }, error => {\n      console.log(error);\n      alert(\"Error al enviar la solicitud\");\n    });\n  }\n  NuevaSolicitud() {\n    this.mostrarNuevaSolicitud = true;\n  }\n  getEstadoSolicitud(aprobacion) {\n    return aprobacion ? \"APROBADA\" : \"NO APROBADA\";\n  }\n  searchSolicitudes(clave) {\n    this.solicitudes = clave === \"\" ? this.solicitudesT : this.buscarSolicitudes(clave, this.solicitudesT);\n  }\n  buscarSolicitudes(clave, solicitudes) {\n    const claveNormalizada = clave.toLowerCase();\n    return solicitudes.filter(s => {\n      return s.id.toString().includes(claveNormalizada) || s.cliente.toString().includes(claveNormalizada) || s.n_cliente.toLowerCase().includes(claveNormalizada) || s.descripcion.toString().includes(claveNormalizada) || s.aprobacion.toString().includes(claveNormalizada);\n    });\n  }\n  searchClientes(clave) {\n    this.clientes = clave === \"\" ? this.clientesT : this.buscarClientes(clave, this.clientesT);\n  }\n  buscarClientes(clave, clientes) {\n    const claveNormalizada = clave.toLowerCase();\n    return clientes.filter(cliente => {\n      return cliente.identificacion.toString().includes(claveNormalizada) || cliente.nombre.toLowerCase().includes(claveNormalizada) || cliente.nit.toLowerCase().includes(claveNormalizada) || cliente.telefono.toString().includes(claveNormalizada);\n    });\n  }\n  getRolDB() {\n    let stringUser = localStorage.getItem('usuario');\n    let usuario = stringUser ? JSON.parse(stringUser) : null;\n    let rol = usuario ? usuario.rol : 0;\n    return rol;\n  }\n  getIdUser() {\n    let stringUser = localStorage.getItem('usuario');\n    let usuario = stringUser ? JSON.parse(stringUser) : null;\n    let id = usuario ? usuario.identificacion : 0;\n    return id;\n  }\n  getSucursal() {\n    let stringUser = localStorage.getItem('usuario');\n    let usuario = stringUser ? JSON.parse(stringUser) : null;\n    let suc = usuario ? usuario.sucursal : 0;\n    return suc;\n  }\n  static #_ = this.ɵfac = function SolicitudesModificacionClienteComponent_Factory(t) {\n    return new (t || SolicitudesModificacionClienteComponent)(i0.ɵɵdirectiveInject(i1.ClientesService));\n  };\n  static #_2 = this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: SolicitudesModificacionClienteComponent,\n    selectors: [[\"app-solicitudes-modificacion-cliente\"]],\n    decls: 2,\n    vars: 2,\n    consts: [[\"class\", \"container mt-2 col-md-4\", 4, \"ngIf\"], [\"class\", \"container mt-10 pt-5\", 4, \"ngIf\"], [1, \"container\", \"mt-2\", \"col-md-4\"], [1, \"row\"], [1, \"col\"], [1, \"card\", \"my-4\"], [1, \"navbar\", \"navbar-expand-lg\", \"bg-white\", \"navbar-light\", \"py-3\", \"py-lg-0\", \"px-lg-5\"], [1, \"mt-2\", \"me-4\"], [1, \"form-group\", \"row\"], [\"for\", \"busqueda\", 1, \"col-md-4\", \"col-form-label\"], [1, \"col-md-8\"], [1, \"input-group\"], [\"type\", \"text\", \"id\", \"busqueda\", \"name\", \"busqueda\", \"placeholder\", \"Buscar clientes...\", 1, \"form-control\", 3, \"ngModel\", \"ngModelChange\", \"input\"], [1, \"input-group-append\"], [1, \"input-group-text\"], [1, \"fas\", \"fa-search\"], [1, \"card-body\"], [3, \"ngSubmit\"], [\"solicitudModificacionClienteForm\", \"ngForm\"], [1, \"form-group\"], [\"for\", \"rol\"], [\"aria-label\", \"Default select example\", \"id\", \"combo\", \"name\", \"cliente\", \"required\", \"\", 1, \"form-select\", 3, \"ngModel\", \"ngModelChange\"], [3, \"value\", 4, \"ngFor\", \"ngForOf\"], [\"for\", \"name\"], [\"type\", \"text\", \"name\", \"name\", \"required\", \"\", 1, \"form-control\", 3, \"ngModel\", \"ngModelChange\"], [\"nombreN\", \"ngModel\"], [1, \"text-center\"], [\"type\", \"submit\", 1, \"btn\", \"btn-success\", \"mt-2\", \"me-4\", 3, \"disabled\"], [1, \"bi\", \"bi-save\"], [1, \"btn\", \"btn-info\", 3, \"click\"], [1, \"bi\", \"bi-x\"], [3, \"value\"], [1, \"container\", \"mt-10\", \"pt-5\"], [1, \"card\"], [1, \"text-end\"], [\"aria-label\", \"Agregar compra\", 1, \"btn\", \"btn-primary\", \"ms-3\", \"mt-2\", 3, \"click\"], [1, \"bi\", \"bi-person-plus-fill\"], [\"type\", \"text\", \"id\", \"busqueda\", \"name\", \"busqueda\", \"placeholder\", \"Buscar solicitudes...\", 1, \"form-control\", 3, \"ngModel\", \"ngModelChange\", \"input\"], [1, \"table\", \"table-bordered\"], [4, \"ngFor\", \"ngForOf\"], [\"disabled\", \"s.aprobacion\", 1, \"btn\", \"btn-warning\", \"me-2\", \"col-sm-5\"], [1, \"bi\", \"bi-pencil\"]],\n    template: function SolicitudesModificacionClienteComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵtemplate(0, SolicitudesModificacionClienteComponent_div_0_Template, 38, 6, \"div\", 0);\n        i0.ɵɵtemplate(1, SolicitudesModificacionClienteComponent_div_1_Template, 36, 4, \"div\", 1);\n      }\n      if (rf & 2) {\n        i0.ɵɵproperty(\"ngIf\", ctx.mostrarNuevaSolicitud);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", !ctx.mostrarNuevaSolicitud);\n      }\n    },\n    dependencies: [i2.NgForOf, i2.NgIf, i3.ɵNgNoValidate, i3.NgSelectOption, i3.ɵNgSelectMultipleOption, i3.DefaultValueAccessor, i3.SelectControlValueAccessor, i3.NgControlStatus, i3.NgControlStatusGroup, i3.RequiredValidator, i3.NgModel, i3.NgForm],\n    styles: [\"\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsInNvdXJjZVJvb3QiOiIifQ== */\"]\n  });\n}","map":{"version":3,"mappings":"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","names":["SolicitudesModificacionCliente","i0","_r2","SolicitudesModificacionClienteComponent","constructor","servicioClientes","ngOnInit","getClientes","getRolDB","subscribe","data","clientes","clientesT","llamarSolicitudes","error","console","log","getSolicitudesClientesModificacion","getIdUser","solicitudes","solicitudesT","guardarNuevaSolicitud","solicitudModificacionClienteForm","s","getSucursal","cliente","descripcion","postCgetSolicitudesClientesModificacionliente","alert","mostrarNuevaSolicitud","resetForm","NuevaSolicitud","getEstadoSolicitud","aprobacion","searchSolicitudes","clave","buscarSolicitudes","claveNormalizada","toLowerCase","filter","id","toString","includes","n_cliente","searchClientes","buscarClientes","identificacion","nombre","nit","telefono","stringUser","localStorage","getItem","usuario","JSON","parse","rol","suc","sucursal","selectors","decls","vars","consts","template"],"sourceRoot":"","sources":["/home/eiler/Documentos/Universidad/SegundoSemestre2024/Archivos/Proyecto1/app/FRONTEND/src/app/area-cajero/solicitudes-modificacion-cliente/solicitudes-modificacion-cliente.component.ts","/home/eiler/Documentos/Universidad/SegundoSemestre2024/Archivos/Proyecto1/app/FRONTEND/src/app/area-cajero/solicitudes-modificacion-cliente/solicitudes-modificacion-cliente.component.html"],"sourcesContent":["import { Component } from '@angular/core';\nimport { NgForm } from '@angular/forms';\nimport { data, error } from 'jquery';\nimport { Cliente } from 'src/app/Modelo/Cliente';\nimport { SolicitudesModificacionCliente } from 'src/app/Modelo/SolicitudesModificacionCliente';\nimport { Usuario } from 'src/app/Modelo/Usuario';\nimport { ClientesService } from 'src/app/Service/clientes.service';\n@Component({\n  selector: 'app-solicitudes-modificacion-cliente',\n  templateUrl: './solicitudes-modificacion-cliente.component.html',\n  styleUrls: ['./solicitudes-modificacion-cliente.component.css']\n})\nexport class SolicitudesModificacionClienteComponent {\n  constructor(private servicioClientes:ClientesService){}\n\n  mostrarNuevaSolicitud:boolean=false;\n\n  solicitudes!:SolicitudesModificacionCliente[]\n  solicitudesT!:SolicitudesModificacionCliente[]\n  claveBusqueda!:string\n  claveBusquedaSolicitud!:string\n  clientes!:Cliente[]\n  clientesT!:Cliente[]\n\n  cliente!:number\n  descripcion!:string\n\n  ngOnInit():void{\n    this.servicioClientes.getClientes(this.getRolDB()).subscribe(data=>{\n      this.clientes=data;\n      this.clientesT=data;\n      this.llamarSolicitudes();\n    }, error=>{\n      console.log(error)\n    })\n  }\n\n  llamarSolicitudes(){\n    this.servicioClientes.getSolicitudesClientesModificacion(this.getRolDB(),this.getIdUser()).subscribe(data=>{\n      this.solicitudes=data;\n      this.solicitudesT=data;\n    })\n  }\n\n\n  guardarNuevaSolicitud(solicitudModificacionClienteForm:NgForm){\n    let s = new SolicitudesModificacionCliente(1,this.getIdUser(),\"\",\"\",\"\",this.getSucursal(),this.cliente,this.descripcion,false);\n    this.servicioClientes.postCgetSolicitudesClientesModificacionliente(s,this.getRolDB()).subscribe(data=>{\n      alert(\"Se ha enviado la solicitud con exito!!!\");\n      this.mostrarNuevaSolicitud=false;\n      solicitudModificacionClienteForm.resetForm();\n      this.ngOnInit();\n\n    },error=>{\n      console.log(error);\n      alert(\"Error al enviar la solicitud\")\n    })\n  }\n\n  NuevaSolicitud(){\n    this.mostrarNuevaSolicitud=true\n  }\n\n  getEstadoSolicitud(aprobacion:boolean):string{\n    return aprobacion? \"APROBADA\": \"NO APROBADA\";\n  }\n\n  searchSolicitudes(clave: string) {\n    this.solicitudes = clave === \"\" ? this.solicitudesT : this.buscarSolicitudes(clave, this.solicitudesT);\n  }\n  buscarSolicitudes(clave: string, solicitudes: SolicitudesModificacionCliente[]): SolicitudesModificacionCliente[] {\n    const claveNormalizada = clave.toLowerCase();\n    \n    return solicitudes.filter(s => {\n      return (\n        s.id.toString().includes(claveNormalizada) || \n        s.cliente.toString().includes(claveNormalizada)||\n        s.n_cliente.toLowerCase().includes(claveNormalizada)||\n        s.descripcion.toString().includes(claveNormalizada)||\n        s.aprobacion.toString().includes(claveNormalizada)\n      );\n    });\n  }\n\n  searchClientes(clave: string) {\n    this.clientes = clave === \"\" ? this.clientesT : this.buscarClientes(clave, this.clientesT);\n  }\n  buscarClientes(clave: string, clientes: Cliente[]): Cliente[] {\n    const claveNormalizada = clave.toLowerCase();\n    \n    return clientes.filter(cliente => {\n      return (\n        cliente.identificacion.toString().includes(claveNormalizada) || \n        cliente.nombre.toLowerCase().includes(claveNormalizada)||\n        cliente.nit.toLowerCase().includes(claveNormalizada)||\n        cliente.telefono.toString().includes(claveNormalizada)\n      );\n    });\n  }\n\n  getRolDB(){\n    let stringUser = localStorage.getItem('usuario');\n    let usuario:Usuario = stringUser? JSON.parse(stringUser):null;\n    let rol = usuario? usuario.rol:0;\n    return rol;\n  }\n\n  getIdUser():number{\n    let stringUser = localStorage.getItem('usuario');\n    let usuario:Usuario = stringUser? JSON.parse(stringUser):null;\n    let id=usuario? usuario.identificacion:0;\n    return id;\n  }\n  getSucursal(){\n    let stringUser = localStorage.getItem('usuario');\n    let usuario:Usuario = stringUser? JSON.parse(stringUser):null;\n    let suc = usuario? usuario.sucursal:0;\n    return suc;\n  }\n}\n","\n<div class=\"container mt-2 col-md-4\" *ngIf=\"mostrarNuevaSolicitud\">\n    <div class=\"row\">\n        <div class=\"col\">\n            <div class=\"card my-4\">\n                <nav class=\"navbar navbar-expand-lg bg-white navbar-light py-3 py-lg-0 px-lg-5\">\n                    <h3 class=\"mt-2 me-4\">Nueva solicitud</h3>\n                </nav>\n                <div class=\"form-group row\">\n                    <label for=\"busqueda\" class=\"col-md-4 col-form-label\">Búsqueda totales: {{clientes.length}}</label>\n                    <div class=\"col-md-8\">\n                        <div class=\"input-group\">\n                            <input type=\"text\" class=\"form-control\" id=\"busqueda\"name=\"busqueda\" \n                                placeholder=\"Buscar clientes...\" [(ngModel)]=\"claveBusqueda\" \n                                (input)=\"searchClientes(claveBusqueda)\"\n                            >\n                            <div class=\"input-group-append\">\n                                <span class=\"input-group-text\">\n                                    <i class=\"fas fa-search\"></i>\n                                </span>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n                <div class=\"card-body\">\n                    <form (ngSubmit)=\"guardarNuevaSolicitud(solicitudModificacionClienteForm)\" #solicitudModificacionClienteForm=\"ngForm\">\n                        <div class=\"form-group\">\n                            <label for=\"rol\">Seleccione el cliente que desee modificar</label>\n                            <select class=\"form-select\" aria-label=\"Default select example\" id=\"combo\" [(ngModel)]=\"cliente\" name=\"cliente\" required>\n                                <option *ngFor=\"let c of clientes;\" [value]=c.identificacion>\n                                   {{c.identificacion}}: {{ c.nombre }}\n                                </option>\n                            </select>\n                        </div>\n                        <br>\n                        <div class=\"form-group\">\n                            <label for=\"name\">Ingrese una descripcion:</label>\n                            <input type=\"text\" class=\"form-control\" name=\"name\" #nombreN=\"ngModel\" [(ngModel)]=\"descripcion\" required>\n                        </div><br>\n                        <div class=\"text-center\">\n                            <button type=\"submit\" class=\"btn btn-success mt-2 me-4\" [disabled]=\"!solicitudModificacionClienteForm.form.valid\">\n                                <i class=\"bi bi-save\"></i> Guardar\n                            </button>\n                            <button class=\"btn btn-info\" (click)=\"mostrarNuevaSolicitud=false &&solicitudModificacionClienteForm.resetForm()\"> <i class=\"bi bi-x\"></i> Cancelar</button>\n\n                        </div>\n                    </form>\n                </div>\n            </div>\n        </div>\n    </div>\n</div>\n<div class=\"container mt-10 pt-5\" *ngIf=\"!mostrarNuevaSolicitud\" >\n    <div class=\"card\">\n        <h3>Totales ({{solicitudes.length}}) </h3>\n        <div class=\"text-end\">\n            <button class=\"btn btn-primary ms-3 mt-2\" aria-label=\"Agregar compra\" (click)=\"NuevaSolicitud()\">\n                <i class=\"bi bi-person-plus-fill\"></i> Agregar\n            </button>\n        </div><br>\n        <div class=\"form-group row\">\n            <label for=\"busqueda\" class=\"col-md-4 col-form-label\">Búsqueda totales: {{solicitudes.length}}</label>\n            <div class=\"col-md-8\">\n                <div class=\"input-group\">\n                    <input type=\"text\" class=\"form-control\" id=\"busqueda\"name=\"busqueda\" \n                        placeholder=\"Buscar solicitudes...\" [(ngModel)]=\"claveBusquedaSolicitud\" \n                        (input)=\"searchSolicitudes(claveBusquedaSolicitud)\"\n                    >\n                    <div class=\"input-group-append\">\n                        <span class=\"input-group-text\">\n                            <i class=\"fas fa-search\"></i>\n                        </span>\n                    </div>\n                </div>\n            </div>\n        </div>\n        \n        <br>\n        <table class=\"table table-bordered\">\n            <thead>\n                <tr>\n                    <th>Codigo</th>\n                    <th>Id cliente</th>\n                    <th>Nombre cliente</th>\n                    <th>Descripcion</th>\n                    <th>Estado</th>\n                    <th class=\"text-center\">ACCIONES</th>\n                </tr>\n            </thead>\n            <tbody>\n                <tr *ngFor=\"let s of solicitudes; let i = index\">\n                    <td>{{s.id}}</td>\n                    <td>{{s.cliente}}</td>\n                    <td>{{s.n_cliente}}</td>\n                    <td>{{s.descripcion}}</td>\n                    <td>{{getEstadoSolicitud(s.aprobacion)}}</td>\n                    <td class=\"text-center\">\n                        <button class=\"btn btn-warning me-2 col-sm-5\" disabled=\"s.aprobacion\"> <i class=\"bi bi-pencil\"></i>   Editar</button>\n                    </td>\n                </tr>\n            </tbody>\n        </table>\n    </div>\n</div>\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}