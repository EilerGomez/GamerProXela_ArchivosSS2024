{"ast":null,"code":"import * as i0 from \"@angular/core\";\nimport * as i1 from \"src/app/Service/clientes.service\";\nimport * as i2 from \"@angular/common\";\nimport * as i3 from \"@angular/forms\";\nfunction ModificacionClientesSolicitudesComponent_div_0_tr_35_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"tr\")(1, \"td\");\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"td\");\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"td\");\n    i0.ɵɵtext(6);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"td\");\n    i0.ɵɵtext(8);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(9, \"td\");\n    i0.ɵɵtext(10);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(11, \"td\", 15)(12, \"button\", 17);\n    i0.ɵɵelement(13, \"i\", 18);\n    i0.ɵɵtext(14, \" Editar\");\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const s_r2 = ctx.$implicit;\n    const ctx_r1 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(s_r2.id);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(s_r2.cliente);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(s_r2.n_cliente);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(s_r2.descripcion);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(ctx_r1.getEstadoSolicitud(s_r2.aprobacion));\n  }\n}\nfunction ModificacionClientesSolicitudesComponent_div_0_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r5 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 1)(1, \"div\", 2)(2, \"h3\");\n    i0.ɵɵtext(3);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"div\", 3)(5, \"button\", 4);\n    i0.ɵɵlistener(\"click\", function ModificacionClientesSolicitudesComponent_div_0_Template_button_click_5_listener() {\n      i0.ɵɵrestoreView(_r5);\n      const ctx_r4 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r4.NuevaSolicitud());\n    });\n    i0.ɵɵelement(6, \"i\", 5);\n    i0.ɵɵtext(7, \" Agregar \");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelement(8, \"br\");\n    i0.ɵɵelementStart(9, \"div\", 6)(10, \"label\", 7);\n    i0.ɵɵtext(11);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(12, \"div\", 8)(13, \"div\", 9)(14, \"input\", 10);\n    i0.ɵɵlistener(\"ngModelChange\", function ModificacionClientesSolicitudesComponent_div_0_Template_input_ngModelChange_14_listener($event) {\n      i0.ɵɵrestoreView(_r5);\n      const ctx_r6 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r6.claveBusquedaSolicitud = $event);\n    })(\"input\", function ModificacionClientesSolicitudesComponent_div_0_Template_input_input_14_listener() {\n      i0.ɵɵrestoreView(_r5);\n      const ctx_r7 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r7.searchSolicitudes(ctx_r7.claveBusquedaSolicitud));\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(15, \"div\", 11)(16, \"span\", 12);\n    i0.ɵɵelement(17, \"i\", 13);\n    i0.ɵɵelementEnd()()()()();\n    i0.ɵɵelement(18, \"br\");\n    i0.ɵɵelementStart(19, \"table\", 14)(20, \"thead\")(21, \"tr\")(22, \"th\");\n    i0.ɵɵtext(23, \"Codigo\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(24, \"th\");\n    i0.ɵɵtext(25, \"Id cliente\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(26, \"th\");\n    i0.ɵɵtext(27, \"Nombre cliente\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(28, \"th\");\n    i0.ɵɵtext(29, \"Descripcion\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(30, \"th\");\n    i0.ɵɵtext(31, \"Estado\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(32, \"th\", 15);\n    i0.ɵɵtext(33, \"ACCIONES\");\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(34, \"tbody\");\n    i0.ɵɵtemplate(35, ModificacionClientesSolicitudesComponent_div_0_tr_35_Template, 15, 5, \"tr\", 16);\n    i0.ɵɵelementEnd()()()();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate1(\"Totales (\", ctx_r0.solicitudes.length, \") \");\n    i0.ɵɵadvance(8);\n    i0.ɵɵtextInterpolate1(\"B\\u00FAsqueda totales: \", ctx_r0.solicitudes.length, \"\");\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"ngModel\", ctx_r0.claveBusquedaSolicitud);\n    i0.ɵɵadvance(21);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r0.solicitudes);\n  }\n}\nexport class ModificacionClientesSolicitudesComponent {\n  constructor(servicioClientes) {\n    this.servicioClientes = servicioClientes;\n  }\n  ngOnInit() {\n    this.llamarSolicitudes();\n  }\n  llamarSolicitudes() {\n    this.servicioClientes.getSolicitudesClientesModificacion(this.getRolDB(), this.getIdUser()).subscribe(data => {\n      this.solicitudes = data;\n      this.solicitudesT = data;\n    });\n  }\n  searchSolicitudes(clave) {\n    this.solicitudes = clave === \"\" ? this.solicitudesT : this.buscarSolicitudes(clave, this.solicitudesT);\n  }\n  buscarSolicitudes(clave, solicitudes) {\n    const claveNormalizada = clave.toLowerCase();\n    return solicitudes.filter(s => {\n      return s.id.toString().includes(claveNormalizada) || s.cliente.toString().includes(claveNormalizada) || s.n_cliente.toLowerCase().includes(claveNormalizada) || s.descripcion.toLowerCase().includes(clave) || s.aprobacion.toString().includes(claveNormalizada);\n    });\n  }\n  getRolDB() {\n    let stringUser = localStorage.getItem('usuario');\n    let usuario = stringUser ? JSON.parse(stringUser) : null;\n    let rol = usuario ? usuario.rol : 0;\n    return rol;\n  }\n  getIdUser() {\n    let stringUser = localStorage.getItem('usuario');\n    let usuario = stringUser ? JSON.parse(stringUser) : null;\n    let id = usuario ? usuario.identificacion : 0;\n    return id;\n  }\n  getSucursal() {\n    let stringUser = localStorage.getItem('usuario');\n    let usuario = stringUser ? JSON.parse(stringUser) : null;\n    let suc = usuario ? usuario.sucursal : 0;\n    return suc;\n  }\n  static #_ = this.ɵfac = function ModificacionClientesSolicitudesComponent_Factory(t) {\n    return new (t || ModificacionClientesSolicitudesComponent)(i0.ɵɵdirectiveInject(i1.ClientesService));\n  };\n  static #_2 = this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: ModificacionClientesSolicitudesComponent,\n    selectors: [[\"app-modificacion-clientes-solicitudes\"]],\n    decls: 1,\n    vars: 1,\n    consts: [[\"class\", \"container mt-5 pt-5\", 4, \"ngIf\"], [1, \"container\", \"mt-5\", \"pt-5\"], [1, \"card\"], [1, \"text-end\"], [\"aria-label\", \"Agregar compra\", 1, \"btn\", \"btn-primary\", \"ms-3\", \"mt-2\", 3, \"click\"], [1, \"bi\", \"bi-person-plus-fill\"], [1, \"form-group\", \"row\"], [\"for\", \"busqueda\", 1, \"col-md-4\", \"col-form-label\"], [1, \"col-md-8\"], [1, \"input-group\"], [\"type\", \"text\", \"id\", \"busqueda\", \"name\", \"busqueda\", \"placeholder\", \"Buscar solicitudes...\", 1, \"form-control\", 3, \"ngModel\", \"ngModelChange\", \"input\"], [1, \"input-group-append\"], [1, \"input-group-text\"], [1, \"fas\", \"fa-search\"], [1, \"table\", \"table-bordered\"], [1, \"text-center\"], [4, \"ngFor\", \"ngForOf\"], [\"disabled\", \"s.aprobacion\", 1, \"btn\", \"btn-warning\"], [1, \"bi\", \"bi-pencil\"]],\n    template: function ModificacionClientesSolicitudesComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵtemplate(0, ModificacionClientesSolicitudesComponent_div_0_Template, 36, 4, \"div\", 0);\n      }\n      if (rf & 2) {\n        i0.ɵɵproperty(\"ngIf\", !ctx.mostrarNuevaSolicitud);\n      }\n    },\n    dependencies: [i2.NgForOf, i2.NgIf, i3.DefaultValueAccessor, i3.NgControlStatus, i3.NgModel],\n    styles: [\"\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsInNvdXJjZVJvb3QiOiIifQ== */\"]\n  });\n}","map":{"version":3,"mappings":"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","names":["i0","ModificacionClientesSolicitudesComponent","constructor","servicioClientes","ngOnInit","llamarSolicitudes","getSolicitudesClientesModificacion","getRolDB","getIdUser","subscribe","data","solicitudes","solicitudesT","searchSolicitudes","clave","buscarSolicitudes","claveNormalizada","toLowerCase","filter","s","id","toString","includes","cliente","n_cliente","descripcion","aprobacion","stringUser","localStorage","getItem","usuario","JSON","parse","rol","identificacion","getSucursal","suc","sucursal","selectors","decls","vars","consts","template"],"sourceRoot":"","sources":["/home/eiler/Documentos/Universidad/SegundoSemestre2024/Archivos/Proyecto1/app/FRONTEND/src/app/area-administrador/modificacion-clientes-solicitudes/modificacion-clientes-solicitudes.component.html","/home/eiler/Documentos/Universidad/SegundoSemestre2024/Archivos/Proyecto1/app/FRONTEND/src/app/area-administrador/modificacion-clientes-solicitudes/modificacion-clientes-solicitudes.component.ts"],"sourcesContent":["\n\n<div class=\"container mt-5 pt-5\" *ngIf=\"!mostrarNuevaSolicitud\" >\n    <div class=\"card\">\n        <h3>Totales ({{solicitudes.length}}) </h3>\n        <div class=\"text-end\">\n            <button class=\"btn btn-primary ms-3 mt-2\" aria-label=\"Agregar compra\" (click)=\"NuevaSolicitud()\">\n                <i class=\"bi bi-person-plus-fill\"></i> Agregar\n            </button>\n        </div><br>\n        <div class=\"form-group row\">\n            <label for=\"busqueda\" class=\"col-md-4 col-form-label\">Búsqueda totales: {{solicitudes.length}}</label>\n            <div class=\"col-md-8\">\n                <div class=\"input-group\">\n                    <input type=\"text\" class=\"form-control\" id=\"busqueda\"name=\"busqueda\" \n                        placeholder=\"Buscar solicitudes...\" [(ngModel)]=\"claveBusquedaSolicitud\" \n                        (input)=\"searchSolicitudes(claveBusquedaSolicitud)\"\n                    >\n                    <div class=\"input-group-append\">\n                        <span class=\"input-group-text\">\n                            <i class=\"fas fa-search\"></i>\n                        </span>\n                    </div>\n                </div>\n            </div>\n        </div>\n        \n        <br>\n        <table class=\"table table-bordered\">\n            <thead>\n                <tr>\n                    <th>Codigo</th>\n                    <th>Id cliente</th>\n                    <th>Nombre cliente</th>\n                    <th>Descripcion</th>\n                    <th>Estado</th>\n                    <th class=\"text-center\">ACCIONES</th>\n                </tr>\n            </thead>\n            <tbody>\n                <tr *ngFor=\"let s of solicitudes; let i = index\">\n                    <td>{{s.id}}</td>\n                    <td>{{s.cliente}}</td>\n                    <td>{{s.n_cliente}}</td>\n                    <td>{{s.descripcion}}</td>\n                    <td>{{getEstadoSolicitud(s.aprobacion)}}</td>\n                    <td class=\"text-center\">\n                        <button class=\"btn btn-warning \" disabled=\"s.aprobacion\"> <i class=\"bi bi-pencil\"></i>   Editar</button>\n                    </td>\n                </tr>\n            </tbody>\n        </table>\n    </div>\n</div>\n","import { Component } from '@angular/core';\nimport { ClientesService } from 'src/app/Service/clientes.service';\nimport { SolicitudesModificacionCliente } from 'src/app/Modelo/SolicitudesModificacionCliente';\nimport { Usuario } from 'src/app/Modelo/Usuario';\n\n@Component({\n  selector: 'app-modificacion-clientes-solicitudes',\n  templateUrl: './modificacion-clientes-solicitudes.component.html',\n  styleUrls: ['./modificacion-clientes-solicitudes.component.css']\n})\nexport class ModificacionClientesSolicitudesComponent {\n  constructor(private servicioClientes:ClientesService){}\n\n  solicitudes!:SolicitudesModificacionCliente[]\n  solicitudesT!:SolicitudesModificacionCliente[]\n  claveBusquedaSolicitud!:string\n  ngOnInit():void{\n    this.llamarSolicitudes();\n  }\n  llamarSolicitudes(){\n    this.servicioClientes.getSolicitudesClientesModificacion(this.getRolDB(),this.getIdUser()).subscribe(data=>{\n      this.solicitudes=data;\n      this.solicitudesT=data;\n    })\n  }\n\n  searchSolicitudes(clave: string) {\n    this.solicitudes = clave === \"\" ? this.solicitudesT : this.buscarSolicitudes(clave, this.solicitudesT);\n  }\n  buscarSolicitudes(clave: string, solicitudes: SolicitudesModificacionCliente[]): SolicitudesModificacionCliente[] {\n    const claveNormalizada = clave.toLowerCase();\n    \n    return solicitudes.filter(s => {\n      return (\n        s.id.toString().includes(claveNormalizada) || \n        s.cliente.toString().includes(claveNormalizada)||\n        s.n_cliente.toLowerCase().includes(claveNormalizada)||\n        s.descripcion.toLowerCase().includes(clave)||\n        s.aprobacion.toString().includes(claveNormalizada)\n      );\n    });\n  }\n  getRolDB(){\n    let stringUser = localStorage.getItem('usuario');\n    let usuario:Usuario = stringUser? JSON.parse(stringUser):null;\n    let rol = usuario? usuario.rol:0;\n    return rol;\n  }\n\n  getIdUser():number{\n    let stringUser = localStorage.getItem('usuario');\n    let usuario:Usuario = stringUser? JSON.parse(stringUser):null;\n    let id=usuario? usuario.identificacion:0;\n    return id;\n  }\n  getSucursal(){\n    let stringUser = localStorage.getItem('usuario');\n    let usuario:Usuario = stringUser? JSON.parse(stringUser):null;\n    let suc = usuario? usuario.sucursal:0;\n    return suc;\n  }\n}\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}