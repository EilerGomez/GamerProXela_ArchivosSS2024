{"ast":null,"code":"import { Venta } from 'src/app/Modelo/Venta';\nimport { Producto } from 'src/app/Modelo/Producto';\nimport { ProdcutosVenta } from 'src/app/Modelo/ProductosVenta';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"src/app/Service/ventas.service\";\nimport * as i2 from \"src/app/Service/productos.service\";\nimport * as i3 from \"src/app/Service/clientes.service\";\nimport * as i4 from \"src/app/Service/tarjetas.service\";\nimport * as i5 from \"@angular/common\";\nimport * as i6 from \"@angular/forms\";\nfunction VentasComponent_div_0_tr_30_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"tr\")(1, \"td\");\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"td\");\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"td\");\n    i0.ɵɵtext(6);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"td\");\n    i0.ɵɵtext(8);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(9, \"td\");\n    i0.ɵɵtext(10);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(11, \"td\");\n    i0.ɵɵtext(12);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const pc_r5 = ctx.$implicit;\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(pc_r5.id_venta);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(pc_r5.id_producto);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(pc_r5.producto);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(pc_r5.cantidad);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(pc_r5.precio_unitario);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(pc_r5.subtotal);\n  }\n}\nfunction VentasComponent_div_0_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r8 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 2)(1, \"div\", 3)(2, \"div\", 4)(3, \"div\", 5)(4, \"nav\", 6)(5, \"h3\", 7);\n    i0.ɵɵtext(6, \"Detalles en esta venta\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(7, \"div\", 8)(8, \"button\", 9);\n    i0.ɵɵlistener(\"click\", function VentasComponent_div_0_Template_button_click_8_listener() {\n      i0.ɵɵrestoreView(_r8);\n      const ctx_r7 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r7.mostrarDetalles = false);\n    });\n    i0.ɵɵelement(9, \"i\", 10);\n    i0.ɵɵtext(10, \" Cerrar\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelement(11, \"div\", 11);\n    i0.ɵɵelementStart(12, \"h3\");\n    i0.ɵɵtext(13);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(14, \"table\", 12)(15, \"thead\")(16, \"tr\")(17, \"th\");\n    i0.ɵɵtext(18, \"#Venta\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(19, \"th\");\n    i0.ɵɵtext(20, \"Codigo producto\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(21, \"th\");\n    i0.ɵɵtext(22, \"Nombre producto\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(23, \"th\");\n    i0.ɵɵtext(24, \"Cantidad\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(25, \"th\");\n    i0.ɵɵtext(26, \"Precio unitario\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(27, \"th\");\n    i0.ɵɵtext(28, \"Subtotal\");\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(29, \"tbody\");\n    i0.ɵɵtemplate(30, VentasComponent_div_0_tr_30_Template, 13, 6, \"tr\", 13);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(31, \"h3\");\n    i0.ɵɵtext(32);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(33, \"h3\");\n    i0.ɵɵtext(34);\n    i0.ɵɵelementEnd()()()()();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(13);\n    i0.ɵɵtextInterpolate1(\"Productos en la venta No.\", ctx_r0.ventaDetalle.codigo, \"\");\n    i0.ɵɵadvance(17);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r0.productosNuevaVenta);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\"Precio total \", ctx_r0.ventaDetalle.total_sin_descuento, \"\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\"Precio total con descuento \", ctx_r0.ventaDetalle.total_con_descuento, \"\");\n  }\n}\nfunction VentasComponent_div_1_option_32_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"option\", 37);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const pr_r13 = ctx.$implicit;\n    i0.ɵɵproperty(\"value\", pr_r13.codigo);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate2(\"C.\", pr_r13.codigo, \": \", pr_r13.nombre, \"\");\n  }\n}\nfunction VentasComponent_div_1_tr_66_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"tr\")(1, \"td\");\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"td\");\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"td\");\n    i0.ɵɵtext(6);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"td\");\n    i0.ɵɵtext(8);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(9, \"td\");\n    i0.ɵɵtext(10);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(11, \"td\");\n    i0.ɵɵtext(12);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const pc_r15 = ctx.$implicit;\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(pc_r15.id_venta);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(pc_r15.id_producto);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(pc_r15.producto);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(pc_r15.cantidad);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(pc_r15.precio_unitario);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(pc_r15.subtotal);\n  }\n}\nfunction VentasComponent_div_1_div_73_div_1_div_4_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r21 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 38)(1, \"input\", 45);\n    i0.ɵɵlistener(\"ngModelChange\", function VentasComponent_div_1_div_73_div_1_div_4_Template_input_ngModelChange_1_listener($event) {\n      i0.ɵɵrestoreView(_r21);\n      const ctx_r20 = i0.ɵɵnextContext(4);\n      return i0.ɵɵresetView(ctx_r20.cantidadPuntosDescuento = $event);\n    });\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r19 = i0.ɵɵnextContext(4);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngModel\", ctx_r19.cantidadPuntosDescuento);\n  }\n}\nfunction VentasComponent_div_1_div_73_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r23 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\")(1, \"input\", 43);\n    i0.ɵɵlistener(\"ngModelChange\", function VentasComponent_div_1_div_73_div_1_Template_input_ngModelChange_1_listener($event) {\n      i0.ɵɵrestoreView(_r23);\n      const ctx_r22 = i0.ɵɵnextContext(3);\n      return i0.ɵɵresetView(ctx_r22.aplicarChekDescuento = $event);\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(2, \"label\", 44);\n    i0.ɵɵtext(3);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(4, VentasComponent_div_1_div_73_div_1_div_4_Template, 2, 1, \"div\", 36);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r17 = i0.ɵɵnextContext(3);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngModel\", ctx_r17.aplicarChekDescuento);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(ctx_r17.infoBotonDescuento);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r17.aplicarChekDescuento);\n  }\n}\nfunction VentasComponent_div_1_div_73_label_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"label\", 44);\n    i0.ɵɵtext(1, \"No aplica Descuento\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction VentasComponent_div_1_div_73_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r25 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 38);\n    i0.ɵɵtemplate(1, VentasComponent_div_1_div_73_div_1_Template, 5, 3, \"div\", 39);\n    i0.ɵɵtemplate(2, VentasComponent_div_1_div_73_label_2_Template, 2, 0, \"label\", 40);\n    i0.ɵɵelementStart(3, \"label\");\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(5, \"br\")(6, \"br\")(7, \"br\")(8, \"br\");\n    i0.ɵɵelementStart(9, \"div\", 33)(10, \"button\", 41);\n    i0.ɵɵlistener(\"click\", function VentasComponent_div_1_div_73_Template_button_click_10_listener() {\n      i0.ɵɵrestoreView(_r25);\n      const ctx_r24 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r24.pagarVenta());\n    });\n    i0.ɵɵelement(11, \"i\", 42);\n    i0.ɵɵtext(12, \" Hacer pago \");\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const ctx_r12 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r12.aplicaDescuento);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", !ctx_r12.aplicaDescuento);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\"Cantidad a cancelar: \", ctx_r12.ventaDetalle.total_sin_descuento - ctx_r12.cantidadPuntosDescuento, \"\");\n  }\n}\nfunction VentasComponent_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r27 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 2)(1, \"div\", 3)(2, \"div\", 4)(3, \"div\", 5)(4, \"nav\", 6)(5, \"h3\", 7);\n    i0.ɵɵtext(6, \"Nueva Venta\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(7, \"div\", 8)(8, \"button\", 14);\n    i0.ɵɵlistener(\"click\", function VentasComponent_div_1_Template_button_click_8_listener() {\n      i0.ɵɵrestoreView(_r27);\n      const ctx_r26 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r26.dejarDeMostrarNuevaVenta());\n    });\n    i0.ɵɵelement(9, \"i\", 10);\n    i0.ɵɵtext(10, \" Cerrar\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(11, \"div\", 15)(12, \"button\", 9);\n    i0.ɵɵlistener(\"click\", function VentasComponent_div_1_Template_button_click_12_listener() {\n      i0.ɵɵrestoreView(_r27);\n      const ctx_r28 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r28.cancelarVenta());\n    });\n    i0.ɵɵelement(13, \"i\", 10);\n    i0.ɵɵtext(14, \" Cancelar venta\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelement(15, \"br\");\n    i0.ɵɵelementStart(16, \"div\", 11)(17, \"form\", 16, 17);\n    i0.ɵɵlistener(\"ngSubmit\", function VentasComponent_div_1_Template_form_ngSubmit_17_listener() {\n      i0.ɵɵrestoreView(_r27);\n      const _r9 = i0.ɵɵreference(18);\n      const ctx_r29 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r29.agregarProductoAVenta(_r9));\n    });\n    i0.ɵɵelementStart(19, \"div\", 18)(20, \"label\", 19);\n    i0.ɵɵtext(21);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(22, \"div\", 20)(23, \"div\", 21)(24, \"input\", 22);\n    i0.ɵɵlistener(\"ngModelChange\", function VentasComponent_div_1_Template_input_ngModelChange_24_listener($event) {\n      i0.ɵɵrestoreView(_r27);\n      const ctx_r30 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r30.claveBusqueda = $event);\n    })(\"input\", function VentasComponent_div_1_Template_input_input_24_listener() {\n      i0.ɵɵrestoreView(_r27);\n      const ctx_r31 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r31.searchProducto(ctx_r31.claveBusqueda));\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(25, \"div\", 23)(26, \"span\", 24);\n    i0.ɵɵelement(27, \"i\", 25);\n    i0.ɵɵelementEnd()()()()();\n    i0.ɵɵelementStart(28, \"div\", 26)(29, \"label\", 27);\n    i0.ɵɵtext(30, \"Seleccione el producto:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(31, \"select\", 28);\n    i0.ɵɵlistener(\"ngModelChange\", function VentasComponent_div_1_Template_select_ngModelChange_31_listener($event) {\n      i0.ɵɵrestoreView(_r27);\n      const ctx_r32 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r32.idProductoSeleccionado = $event);\n    })(\"click\", function VentasComponent_div_1_Template_select_click_31_listener() {\n      i0.ɵɵrestoreView(_r27);\n      const ctx_r33 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r33.mostrarInfoProducto());\n    });\n    i0.ɵɵtemplate(32, VentasComponent_div_1_option_32_Template, 2, 3, \"option\", 29);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelement(33, \"br\");\n    i0.ɵɵelementStart(34, \"h4\");\n    i0.ɵɵtext(35);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(36, \"br\");\n    i0.ɵɵelementStart(37, \"h4\");\n    i0.ɵɵtext(38);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(39, \"div\", 26)(40, \"label\", 30);\n    i0.ɵɵtext(41, \"Ingrese la cantidad del producto:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(42, \"input\", 31);\n    i0.ɵɵlistener(\"ngModelChange\", function VentasComponent_div_1_Template_input_ngModelChange_42_listener($event) {\n      i0.ɵɵrestoreView(_r27);\n      const ctx_r34 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r34.cantidadProducto = $event);\n    });\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelement(43, \"br\");\n    i0.ɵɵelementStart(44, \"div\")(45, \"button\", 32);\n    i0.ɵɵelement(46, \"i\", 10);\n    i0.ɵɵtext(47, \" Agregar\");\n    i0.ɵɵelementEnd()()()();\n    i0.ɵɵelementStart(48, \"h3\");\n    i0.ɵɵtext(49);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(50, \"table\", 12)(51, \"thead\")(52, \"tr\")(53, \"th\");\n    i0.ɵɵtext(54, \"# Venta\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(55, \"th\");\n    i0.ɵɵtext(56, \"Codigo producto\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(57, \"th\");\n    i0.ɵɵtext(58, \"Nombre producto\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(59, \"th\");\n    i0.ɵɵtext(60, \"Cantidad\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(61, \"th\");\n    i0.ɵɵtext(62, \"Precio unitario\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(63, \"th\");\n    i0.ɵɵtext(64, \"Subtotal\");\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(65, \"tbody\");\n    i0.ɵɵtemplate(66, VentasComponent_div_1_tr_66_Template, 13, 6, \"tr\", 13);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(67, \"h3\");\n    i0.ɵɵtext(68);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(69, \"div\", 33)(70, \"button\", 34);\n    i0.ɵɵlistener(\"click\", function VentasComponent_div_1_Template_button_click_70_listener() {\n      i0.ɵɵrestoreView(_r27);\n      const ctx_r35 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r35.hacerPago());\n    });\n    i0.ɵɵelement(71, \"i\", 35);\n    i0.ɵɵtext(72, \" Realizar cobro \");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵtemplate(73, VentasComponent_div_1_div_73_Template, 13, 3, \"div\", 36);\n    i0.ɵɵelementEnd()()()();\n  }\n  if (rf & 2) {\n    const _r9 = i0.ɵɵreference(18);\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(21);\n    i0.ɵɵtextInterpolate1(\"B\\u00FAsqueda totales: \", ctx_r1.productos.length, \"\");\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"ngModel\", ctx_r1.claveBusqueda);\n    i0.ɵɵadvance(7);\n    i0.ɵɵproperty(\"ngModel\", ctx_r1.idProductoSeleccionado);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r1.productos);\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate1(\"Cantidad en estanteria: \", ctx_r1.productoSeleccionado.cantidad_estanteria, \"\");\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate1(\"Precio del producto: Q.\", ctx_r1.productoSeleccionado.precio_unitario_venta, \"\");\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"ngModel\", ctx_r1.cantidadProducto);\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"disabled\", !_r9.form.valid);\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate1(\"Productos en la venta No.\", ctx_r1.codigoNuevaVenta, \"\");\n    i0.ɵɵadvance(17);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r1.productosNuevaVenta);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\"Precio total \", ctx_r1.totalNuevaVenta, \"\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"disabled\", ctx_r1.totalNuevaVenta <= 0);\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"ngIf\", ctx_r1.mostrarPago);\n  }\n}\nfunction VentasComponent_div_2_tr_29_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r40 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"tr\")(1, \"td\");\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"td\");\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"td\");\n    i0.ɵɵtext(6);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"td\");\n    i0.ɵɵtext(8);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(9, \"td\", 33)(10, \"button\", 49);\n    i0.ɵɵlistener(\"click\", function VentasComponent_div_2_tr_29_Template_button_click_10_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r40);\n      const c_r37 = restoredCtx.$implicit;\n      const ctx_r39 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r39.seleccionarCliente(c_r37.identificacion));\n    });\n    i0.ɵɵelement(11, \"i\", 50);\n    i0.ɵɵtext(12, \" Seleccionar\");\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const c_r37 = ctx.$implicit;\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(c_r37.identificacion);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(c_r37.nombre);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(c_r37.telefono);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(c_r37.nit);\n  }\n}\nfunction VentasComponent_div_2_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r42 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 46)(1, \"div\", 47)(2, \"h3\");\n    i0.ɵɵtext(3, \"Seleccione un cliente para realizar la venta \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(4, \"br\");\n    i0.ɵɵelementStart(5, \"div\", 18)(6, \"label\", 19);\n    i0.ɵɵtext(7);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(8, \"div\", 20)(9, \"div\", 21)(10, \"input\", 48);\n    i0.ɵɵlistener(\"ngModelChange\", function VentasComponent_div_2_Template_input_ngModelChange_10_listener($event) {\n      i0.ɵɵrestoreView(_r42);\n      const ctx_r41 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r41.claveBusqueda = $event);\n    })(\"input\", function VentasComponent_div_2_Template_input_input_10_listener() {\n      i0.ɵɵrestoreView(_r42);\n      const ctx_r43 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r43.searchCliente(ctx_r43.claveBusqueda));\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(11, \"div\", 23)(12, \"span\", 24);\n    i0.ɵɵelement(13, \"i\", 25);\n    i0.ɵɵelementEnd()()()()();\n    i0.ɵɵelement(14, \"br\");\n    i0.ɵɵelementStart(15, \"table\", 12)(16, \"thead\")(17, \"tr\")(18, \"th\");\n    i0.ɵɵtext(19, \"Identificacion\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(20, \"th\");\n    i0.ɵɵtext(21, \"Nombre\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(22, \"th\");\n    i0.ɵɵtext(23, \"Telefono\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(24, \"th\");\n    i0.ɵɵtext(25, \"Nit\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(26, \"th\", 33);\n    i0.ɵɵtext(27, \"ACCIONES\");\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(28, \"tbody\");\n    i0.ɵɵtemplate(29, VentasComponent_div_2_tr_29_Template, 13, 4, \"tr\", 13);\n    i0.ɵɵelementEnd()()()();\n  }\n  if (rf & 2) {\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(7);\n    i0.ɵɵtextInterpolate1(\"B\\u00FAsqueda totales: \", ctx_r2.clientes.length, \"\");\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"ngModel\", ctx_r2.claveBusqueda);\n    i0.ɵɵadvance(19);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r2.clientes);\n  }\n}\nfunction VentasComponent_div_3_tr_39_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r48 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"tr\")(1, \"td\");\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"td\");\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"td\");\n    i0.ɵɵtext(6);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"td\");\n    i0.ɵɵtext(8);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(9, \"td\");\n    i0.ɵɵtext(10);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(11, \"td\");\n    i0.ɵɵtext(12);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(13, \"td\");\n    i0.ɵɵtext(14);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(15, \"td\", 33)(16, \"button\", 54);\n    i0.ɵɵlistener(\"click\", function VentasComponent_div_3_tr_39_Template_button_click_16_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r48);\n      const v_r45 = restoredCtx.$implicit;\n      const ctx_r47 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r47.verDetalles(v_r45));\n    });\n    i0.ɵɵelement(17, \"i\", 55);\n    i0.ɵɵtext(18, \" Detalles\");\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const v_r45 = ctx.$implicit;\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(v_r45.codigo);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(v_r45.n_cliente);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(v_r45.n_sucursal);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\"Caja \", v_r45.caja, \"\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(v_r45.fecha);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(v_r45.total_sin_descuento);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(v_r45.total_con_descuento);\n  }\n}\nfunction VentasComponent_div_3_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r50 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 46)(1, \"div\", 47)(2, \"h3\");\n    i0.ɵɵtext(3);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"div\", 8)(5, \"button\", 51);\n    i0.ɵɵlistener(\"click\", function VentasComponent_div_3_Template_button_click_5_listener() {\n      i0.ɵɵrestoreView(_r50);\n      const ctx_r49 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r49.mostrarSelectCliente());\n    });\n    i0.ɵɵelement(6, \"i\", 52);\n    i0.ɵɵtext(7, \" Agregar \");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelement(8, \"br\");\n    i0.ɵɵelementStart(9, \"div\", 18)(10, \"label\", 19);\n    i0.ɵɵtext(11);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(12, \"div\", 20)(13, \"div\", 21)(14, \"input\", 53);\n    i0.ɵɵlistener(\"ngModelChange\", function VentasComponent_div_3_Template_input_ngModelChange_14_listener($event) {\n      i0.ɵɵrestoreView(_r50);\n      const ctx_r51 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r51.claveBusqueda = $event);\n    })(\"input\", function VentasComponent_div_3_Template_input_input_14_listener() {\n      i0.ɵɵrestoreView(_r50);\n      const ctx_r52 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r52.searchVenta(ctx_r52.claveBusqueda));\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(15, \"div\", 23)(16, \"span\", 24);\n    i0.ɵɵelement(17, \"i\", 25);\n    i0.ɵɵelementEnd()()()()();\n    i0.ɵɵelement(18, \"br\");\n    i0.ɵɵelementStart(19, \"table\", 12)(20, \"thead\")(21, \"tr\")(22, \"th\");\n    i0.ɵɵtext(23, \"Codigo\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(24, \"th\");\n    i0.ɵɵtext(25, \"Cliente\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(26, \"th\");\n    i0.ɵɵtext(27, \"Sucursal\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(28, \"th\");\n    i0.ɵɵtext(29, \"Caja\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(30, \"th\");\n    i0.ɵɵtext(31, \"Fecha\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(32, \"th\");\n    i0.ɵɵtext(33, \"Total\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(34, \"th\");\n    i0.ɵɵtext(35, \"T/C descuento\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(36, \"th\", 33);\n    i0.ɵɵtext(37, \"ACCIONES\");\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(38, \"tbody\");\n    i0.ɵɵtemplate(39, VentasComponent_div_3_tr_39_Template, 19, 7, \"tr\", 13);\n    i0.ɵɵelementEnd()()()();\n  }\n  if (rf & 2) {\n    const ctx_r3 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate1(\"Totales (\", ctx_r3.ventas.length, \") \");\n    i0.ɵɵadvance(8);\n    i0.ɵɵtextInterpolate1(\"B\\u00FAsqueda totales: \", ctx_r3.ventas.length, \"\");\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"ngModel\", ctx_r3.claveBusqueda);\n    i0.ɵɵadvance(25);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r3.ventas);\n  }\n}\nexport class VentasComponent {\n  constructor(servicioVentas, servicioProductos, servicioClientes, servicioTarjetas) {\n    this.servicioVentas = servicioVentas;\n    this.servicioProductos = servicioProductos;\n    this.servicioClientes = servicioClientes;\n    this.servicioTarjetas = servicioTarjetas;\n    this.mostrarPago = false;\n    this.aplicarChekDescuento = false;\n    this.totalNuevaVenta = 0;\n    this.mostrarDetalles = false;\n    this.mostrarNuevaVenta = false;\n    this.mostrarSeleccionarCliente = false;\n    this.productoSeleccionado = new Producto(1, \"\", 0, \"\", 12, 1);\n    this.infoBotonDescuento = \"Aplicar descuento\";\n    this.aplicaDescuento = true;\n    this.cantidadPuntosDescuento = 0;\n  }\n  ngOnInit() {\n    this.servicioVentas.getVentas(this.getRolDB(), this.getSucursal()).subscribe(data => {\n      this.ventas = data;\n      this.ventasT = data;\n      this.traerProductos();\n      this.getClientes();\n    }, error => {\n      console.log(error);\n      this.traerProductos();\n      this.getClientes();\n    });\n  }\n  traerProductosNuevaVenta() {\n    this.servicioProductos.getProductosNuevaVenta(this.codigoNuevaVenta, this.getRolDB()).subscribe(data => {\n      this.productosNuevaVenta = data;\n    }, error => {\n      console.log(error);\n    });\n  }\n  verDetalles(v) {\n    this.ventaDetalle = v;\n    this.servicioProductos.getProductosNuevaVenta(v.codigo, this.getRolDB()).subscribe(data => {\n      this.productosNuevaVenta = data;\n      this.mostrarDetalles = true;\n    });\n  }\n  nuevaVenta() {\n    //generar la nueva venta\n    this.claveBusqueda = \"\";\n    this.productosNuevaVenta = [];\n    this.totalNuevaVenta = 0;\n    this.mostrarNuevaVenta = true;\n    let v = new Venta(1, this.getIDUser(), \"\", this.getSucursal(), \"\", this.idCliente, \"\", \"\", 0, 0, \"\", this.getCaja(), 0);\n    console.log(v);\n    this.servicioVentas.NuevaVenta(v, this.getRolDB()).subscribe(data => {\n      this.codigoNuevaVenta = data.codido_venta;\n    });\n  }\n  mostrarInfoProducto() {\n    console.log(\"Mostrar info de producto\");\n    this.productoSeleccionado = this.getProducto(this.productos, this.idProductoSeleccionado);\n  }\n  dejarDeMostrarNuevaVenta() {\n    this.claveBusqueda = \"\";\n    if (this.totalNuevaVenta == 0) {\n      this.mostrarNuevaVenta = false;\n      this.servicioVentas.deleteVenta(this.getRolDB(), this.codigoNuevaVenta).subscribe(data => {\n        console.log(\"Venta eliminada al no tener nada\");\n        this.ngOnInit();\n      });\n    } else {\n      alert(\"Debe haber un pago en la venta\");\n    }\n  }\n  traerProductos() {\n    this.servicioProductos.getProductosSucursal(this.getSucursal(), this.getRolDB()).subscribe(data => {\n      this.productos = data;\n      this.productosT = data;\n      //console.log(this.productos)\n    }, error => {\n      console.log(error);\n    });\n  }\n  agregarProductoAVenta(nuevaVentaForm) {\n    let pv = new ProdcutosVenta(this.codigoNuevaVenta, this.productoSeleccionado.codigo, this.cantidadProducto, this.productoSeleccionado.precio_unitario_venta);\n    this.servicioProductos.nuevoProductoVenta(pv, this.getRolDB()).subscribe(data => {\n      alert(\"Se ha vendido un nuevo producto!!!\");\n      this.claveBusqueda = \"\";\n      this.traerProductosNuevaVenta();\n      this.traerProductos();\n      this.totalNuevaVenta = this.totalNuevaVenta + pv.cantidad * pv.precio_unitario;\n      nuevaVentaForm.resetForm();\n      this.productoSeleccionado.cantidad_estanteria = 0;\n      this.productoSeleccionado.precio_unitario_venta = 0;\n    }, error => {\n      alert(\"No hay suficiente producto en esta sucursal a la venta.\");\n    });\n    //insertar productos a la venta\n  }\n\n  getRolDB() {\n    let stringUser = localStorage.getItem('usuario');\n    let usuario = stringUser ? JSON.parse(stringUser) : null;\n    let rol = usuario ? usuario.rol : 0;\n    return rol;\n  }\n  getCaja() {\n    let stringUser = localStorage.getItem('codigocaja');\n    let caja = parseInt(stringUser ? JSON.parse(stringUser) : \"\");\n    return caja;\n  }\n  getIDUser() {\n    let stringUser = localStorage.getItem('usuario');\n    let usuario = stringUser ? JSON.parse(stringUser) : null;\n    let rol = usuario ? usuario.identificacion : 0;\n    return rol;\n  }\n  getSucursal() {\n    let stringUser = localStorage.getItem('usuario');\n    let usuario = stringUser ? JSON.parse(stringUser) : null;\n    let suc = usuario ? usuario.sucursal : 0;\n    return suc;\n  }\n  getProducto(productos, idp) {\n    let pr = new Producto(1, \"\", 0, \"\", 0, 4);\n    productos.forEach(p => {\n      if (p.codigo == idp) {\n        pr = p;\n      }\n    });\n    return pr;\n  }\n  getClientes() {\n    this.servicioClientes.getClientes(this.getRolDB()).subscribe(data => {\n      this.clientes = data;\n      this.clientesT = data;\n      console.log(this.clientes);\n    }, error => {\n      console.log(error);\n    });\n  }\n  searchCliente(clave) {\n    this.clientes = clave === \"\" ? this.clientesT : this.buscarClientes(clave, this.clientesT);\n  }\n  buscarClientes(clave, clientes) {\n    const claveNormalizada = clave.toLowerCase();\n    return clientes.filter(cliente => {\n      return cliente.identificacion.toString().includes(claveNormalizada) || cliente.nombre.toLowerCase().includes(claveNormalizada) || cliente.nit.toLowerCase().includes(claveNormalizada) || cliente.telefono.toString().includes(claveNormalizada);\n    });\n  }\n  searchVenta(clave) {\n    this.ventas = clave === \"\" ? this.ventasT : this.buscarVentas(clave, this.ventasT);\n  }\n  buscarVentas(clave, vt) {\n    const claveNormalizada = clave.toLowerCase();\n    return vt.filter(v => {\n      return v.codigo.toString().toLowerCase().includes(claveNormalizada) || v.n_cliente.toLowerCase().includes(claveNormalizada) || v.fecha.toLowerCase().includes(claveNormalizada);\n    });\n  }\n  seleccionarCliente(idC) {\n    this.idCliente = idC;\n    this.mostrarSeleccionarCliente = false;\n    this.productosNuevaVenta = [];\n    this.totalNuevaVenta = 0;\n    this.mostrarNuevaVenta = true;\n    this.claveBusqueda = \"\";\n    let v = new Venta(1, this.getIDUser(), \"\", this.getSucursal(), \"\", this.idCliente, \"\", \"\", 0, 0, \"\", this.getCaja(), 0);\n    console.log(v);\n    this.servicioVentas.NuevaVenta(v, this.getRolDB()).subscribe(data => {\n      this.codigoNuevaVenta = data.codigo_venta;\n    }, error => {\n      console.log(error);\n    });\n  }\n  hacerPago() {\n    this.mostrarPago = true;\n    this.getTarjetaCliente(this.idCliente);\n  }\n  pagarVenta() {\n    //aqui logica si aplico descuento y realizar el pago\n    if (this.aplicarChekDescuento) {\n      alert(\"Aplicar la logica del descuento!!!!!\");\n    } else {\n      alert(\"Pago realizado!!!!!\");\n      this.servicioVentas.putDineroCobroSinDescuento(this.codigoNuevaVenta, this.getSucursal(), this.getRolDB()).subscribe(data => {\n        this.mostrarNuevaVenta = false;\n        this.ngOnInit();\n      }, error => {\n        console.log(\"No se pudo hacer el pago \\n\" + error);\n      });\n    }\n  }\n  searchProducto(clave) {\n    this.productos = clave === \"\" ? this.productosT : this.buscarProductos(clave, this.productosT);\n  }\n  buscarProductos(clave, productos) {\n    const claveNormalizada = clave.toLowerCase();\n    return productos.filter(producto => {\n      return producto.nombre.toLowerCase().includes(claveNormalizada) || producto.codigo.toString().includes(clave);\n    });\n  }\n  cancelarVenta() {\n    this.servicioVentas.cancelarVenta(this.getRolDB(), this.codigoNuevaVenta).subscribe(data => {\n      alert(\"Se ha cancelado la venta con exito!!\");\n      this.mostrarNuevaVenta = false;\n    });\n  }\n  mostrarSelectCliente() {\n    this.mostrarSeleccionarCliente = true;\n    this.claveBusqueda = \"\";\n  }\n  getTarjetaCliente(idc) {\n    this.idCliente;\n    this.servicioTarjetas.getTarjetaByIDCiente(this.getRolDB(), idc).subscribe(data => {\n      this.tarjetaDeCliente = data;\n      if (!this.tarjetaDeCliente) {\n        this.aplicaDescuento = false;\n        console.log(\"No aplica el descuento\");\n      }\n      console.log(this.tarjetaDeCliente);\n    }, error => {\n      console.log(error);\n      this.aplicaDescuento = false;\n    });\n  }\n  static #_ = this.ɵfac = function VentasComponent_Factory(t) {\n    return new (t || VentasComponent)(i0.ɵɵdirectiveInject(i1.VentasService), i0.ɵɵdirectiveInject(i2.ProductosService), i0.ɵɵdirectiveInject(i3.ClientesService), i0.ɵɵdirectiveInject(i4.TarjetasService));\n  };\n  static #_2 = this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: VentasComponent,\n    selectors: [[\"app-ventas\"]],\n    decls: 4,\n    vars: 4,\n    consts: [[\"class\", \"container mt-2 col-md-10\", 4, \"ngIf\"], [\"class\", \"container\", 4, \"ngIf\"], [1, \"container\", \"mt-2\", \"col-md-10\"], [1, \"row\"], [1, \"col\"], [1, \"card\", \"my-10\"], [1, \"navbar\", \"navbar-expand-lg\", \"bg-white\", \"navbar-light\", \"py-3\", \"py-lg-0\", \"px-lg-5\"], [1, \"mt-2\", \"me-4\"], [1, \"text-end\"], [\"type\", \"submit\", 1, \"btn\", \"btn-danger\", 3, \"click\"], [1, \"bi\", \"bi-add\"], [1, \"card-body\"], [1, \"table\", \"table-bordered\"], [4, \"ngFor\", \"ngForOf\"], [\"type\", \"submit\", 1, \"btn\", \"btn-warning\", 3, \"click\"], [1, \"text-init\"], [3, \"ngSubmit\"], [\"nuevaVentaForm\", \"ngForm\"], [1, \"form-group\", \"row\"], [\"for\", \"busqueda\", 1, \"col-md-4\", \"col-form-label\"], [1, \"col-md-8\"], [1, \"input-group\"], [\"type\", \"text\", \"id\", \"busqueda\", \"name\", \"busqueda\", \"placeholder\", \"Buscar productos...\", 1, \"form-control\", 3, \"ngModel\", \"ngModelChange\", \"input\"], [1, \"input-group-append\"], [1, \"input-group-text\"], [1, \"fas\", \"fa-search\"], [1, \"form-group\"], [\"for\", \"rol\"], [\"aria-label\", \"Default select example\", \"id\", \"combo\", \"name\", \"comoboProductos\", \"required\", \"\", 1, \"form-select\", 3, \"ngModel\", \"ngModelChange\", \"click\"], [3, \"value\", 4, \"ngFor\", \"ngForOf\"], [\"for\", \"cantidad\"], [\"type\", \"number\", \"name\", \"cantidad\", \"required\", \"\", 1, \"form-control\", 3, \"ngModel\", \"ngModelChange\"], [\"type\", \"submit\", 1, \"btn\", \"btn-success\", 3, \"disabled\"], [1, \"text-center\"], [\"type\", \"submit\", 1, \"btn\", \"btn-primary\", \"btn-lg\", 3, \"disabled\", \"click\"], [1, \"bi\", \"bi-cash\"], [\"class\", \"form-group mt-3\", 4, \"ngIf\"], [3, \"value\"], [1, \"form-group\", \"mt-3\"], [4, \"ngIf\"], [\"for\", \"activo\", 4, \"ngIf\"], [\"type\", \"submit\", 1, \"btn\", \"btn-primary\", \"btn-lg\", 3, \"click\"], [1, \"bi\", \"bi-check-all\"], [\"type\", \"checkbox\", \"id\", \"activo\", \"name\", \"activo\", 3, \"ngModel\", \"ngModelChange\"], [\"for\", \"activo\"], [\"type\", \"number\", \"id\", \"cantidadDesc\", \"name\", \"cantidadDesc\", 1, \"form-control\", 3, \"ngModel\", \"ngModelChange\"], [1, \"container\"], [1, \"card\"], [\"type\", \"text\", \"id\", \"busqueda\", \"name\", \"busqueda\", \"placeholder\", \"Buscar clientes...\", 1, \"form-control\", 3, \"ngModel\", \"ngModelChange\", \"input\"], [1, \"btn\", \"btn-success\", 3, \"click\"], [1, \"bi\", \"bi-check2\"], [\"aria-label\", \"Agregar compra\", 1, \"btn\", \"btn-primary\", \"ms-3\", \"mt-2\", 3, \"click\"], [1, \"bi\", \"bi-cart-plus-fill\", \"bi-xxl\"], [\"type\", \"text\", \"id\", \"busqueda\", \"name\", \"busqueda\", \"placeholder\", \"Buscar venta...\", 1, \"form-control\", 3, \"ngModel\", \"ngModelChange\", \"input\"], [1, \"btn\", \"btn-warning\", 3, \"click\"], [1, \"bi\", \"bi-eye\"]],\n    template: function VentasComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵtemplate(0, VentasComponent_div_0_Template, 35, 4, \"div\", 0);\n        i0.ɵɵtemplate(1, VentasComponent_div_1_Template, 74, 13, \"div\", 0);\n        i0.ɵɵtemplate(2, VentasComponent_div_2_Template, 30, 3, \"div\", 1);\n        i0.ɵɵtemplate(3, VentasComponent_div_3_Template, 40, 4, \"div\", 1);\n      }\n      if (rf & 2) {\n        i0.ɵɵproperty(\"ngIf\", ctx.mostrarDetalles);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.mostrarNuevaVenta);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.mostrarSeleccionarCliente);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", !ctx.mostrarNuevaVenta && !ctx.mostrarDetalles && !ctx.mostrarSeleccionarCliente);\n      }\n    },\n    dependencies: [i5.NgForOf, i5.NgIf, i6.ɵNgNoValidate, i6.NgSelectOption, i6.ɵNgSelectMultipleOption, i6.DefaultValueAccessor, i6.NumberValueAccessor, i6.CheckboxControlValueAccessor, i6.SelectControlValueAccessor, i6.NgControlStatus, i6.NgControlStatusGroup, i6.RequiredValidator, i6.NgModel, i6.NgForm],\n    styles: [\"\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsInNvdXJjZVJvb3QiOiIifQ== */\"]\n  });\n}","map":{"version":3,"mappings":"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","names":["Venta","Producto","ProdcutosVenta","i0","VentasComponent","constructor","servicioVentas","servicioProductos","servicioClientes","servicioTarjetas","ngOnInit","getVentas","getRolDB","getSucursal","subscribe","data","ventas","ventasT","traerProductos","getClientes","error","console","log","traerProductosNuevaVenta","getProductosNuevaVenta","codigoNuevaVenta","productosNuevaVenta","verDetalles","v","ventaDetalle","codigo","mostrarDetalles","nuevaVenta","claveBusqueda","totalNuevaVenta","mostrarNuevaVenta","getIDUser","idCliente","getCaja","NuevaVenta","codido_venta","mostrarInfoProducto","productoSeleccionado","getProducto","productos","idProductoSeleccionado","dejarDeMostrarNuevaVenta","deleteVenta","alert","getProductosSucursal","productosT","agregarProductoAVenta","nuevaVentaForm","pv","cantidadProducto","precio_unitario_venta","nuevoProductoVenta","cantidad","precio_unitario","resetForm","cantidad_estanteria","stringUser","localStorage","getItem","usuario","JSON","parse","rol","caja","parseInt","identificacion","suc","sucursal","idp","pr","forEach","p","clientes","clientesT","searchCliente","clave","buscarClientes","claveNormalizada","toLowerCase","filter","cliente","toString","includes","nombre","nit","telefono","searchVenta","buscarVentas","vt","n_cliente","fecha","seleccionarCliente","idC","mostrarSeleccionarCliente","codigo_venta","hacerPago","mostrarPago","getTarjetaCliente","pagarVenta","aplicarChekDescuento","putDineroCobroSinDescuento","searchProducto","buscarProductos","producto","cancelarVenta","mostrarSelectCliente","idc","getTarjetaByIDCiente","tarjetaDeCliente","aplicaDescuento","selectors","decls","vars","consts","template"],"sourceRoot":"","sources":["/home/eiler/Documentos/Universidad/SegundoSemestre2024/Archivos/Proyecto1/app/FRONTEND/src/app/area-cajero/ventas/ventas.component.ts","/home/eiler/Documentos/Universidad/SegundoSemestre2024/Archivos/Proyecto1/app/FRONTEND/src/app/area-cajero/ventas/ventas.component.html"],"sourcesContent":["import { Component } from '@angular/core';\nimport { Venta } from 'src/app/Modelo/Venta';\nimport { VentasService } from 'src/app/Service/ventas.service';\nimport { ProductosService } from 'src/app/Service/productos.service';\nimport { Producto } from 'src/app/Modelo/Producto';\nimport { Usuario } from 'src/app/Modelo/Usuario';\nimport { data, error } from 'jquery';\nimport { NgForm } from '@angular/forms';\nimport { ClientesService } from 'src/app/Service/clientes.service';\nimport { Cliente } from 'src/app/Modelo/Cliente';\nimport { ProdcutosVenta } from 'src/app/Modelo/ProductosVenta';\nimport { TarjetasDescuento } from 'src/app/Modelo/TarjetasDescuento';\nimport { TarjetasService } from 'src/app/Service/tarjetas.service';\n@Component({\n  selector: 'app-ventas',\n  templateUrl: './ventas.component.html',\n  styleUrls: ['./ventas.component.css']\n})\nexport class VentasComponent {\n\n  constructor(private servicioVentas:VentasService, private servicioProductos:ProductosService,\n    private servicioClientes:ClientesService, private servicioTarjetas:TarjetasService\n  ){}\n  ngOnInit():void{\n    this.servicioVentas.getVentas(this.getRolDB(),this.getSucursal()).subscribe(data=>{\n      this.ventas=data;\n      this.ventasT=data;\n      this.traerProductos();\n      this.getClientes();\n    },error=>{\n      console.log(error)\n      this.traerProductos();\n      this.getClientes();\n    })\n  }\n\n  productosNuevaVenta!:ProdcutosVenta[]\n\n  mostrarPago:boolean=false;\n  aplicarChekDescuento:boolean=false\n\n  ventaDetalle!:Venta\n  totalNuevaVenta:number=0\n  productos!:Producto[]\n  productosT!:Producto[]\n  mostrarDetalles:boolean=false\n  mostrarNuevaVenta:boolean=false\n  mostrarSeleccionarCliente:boolean=false;\n  \n  clientes!:Cliente[]\n  clientesT!:Cliente[]\n\n  ventas!:Venta[]\n  ventasT!:Venta[]\n  precioVentaProducto!:number\n  idProductoSeleccionado!:number\n  productoSeleccionado:Producto = new Producto(1,\"\",0,\"\",12,1,);\n  idCliente!:number\n\n  claveBusqueda!:string\n\n  cantidadProducto!:number\n  codigoNuevaVenta!:number\n\n\n  traerProductosNuevaVenta(){\n    this.servicioProductos.getProductosNuevaVenta(this.codigoNuevaVenta,this.getRolDB()).subscribe(data=>{\n      this.productosNuevaVenta=data;\n    }, error=>{\n      console.log(error)\n    })\n  }\n  verDetalles(v:Venta){\n    this.ventaDetalle=v;\n    this.servicioProductos.getProductosNuevaVenta(v.codigo,this.getRolDB()).subscribe(data=>{\n      this.productosNuevaVenta=data;\n      this.mostrarDetalles=true;\n    })\n  }\n\n  nuevaVenta(){\n    //generar la nueva venta\n    this.claveBusqueda=\"\"\n    this.productosNuevaVenta=[]\n    this.totalNuevaVenta=0;\n    this.mostrarNuevaVenta=true;\n    let v = new Venta(1,this.getIDUser(),\"\",this.getSucursal(),\"\",this.idCliente,\"\",\"\",0,0,\"\",this.getCaja(),0)\n    console.log(v);\n    this.servicioVentas.NuevaVenta(v,this.getRolDB()).subscribe(data=>{\n      this.codigoNuevaVenta=data.codido_venta\n    })\n  }\n  mostrarInfoProducto(){\n    console.log(\"Mostrar info de producto\")\n    this.productoSeleccionado = this.getProducto(this.productos,(this.idProductoSeleccionado));\n    \n  }\n  dejarDeMostrarNuevaVenta(){\n    this.claveBusqueda=\"\"\n    if(this.totalNuevaVenta==0){\n      this.mostrarNuevaVenta=false;\n      this.servicioVentas.deleteVenta(this.getRolDB(),this.codigoNuevaVenta).subscribe(data=>{\n        console.log(\"Venta eliminada al no tener nada\")\n        this.ngOnInit();\n      })\n     \n      \n    }else{\n      alert(\"Debe haber un pago en la venta\")\n    }\n  }\n  traerProductos(){\n    this.servicioProductos.getProductosSucursal(this.getSucursal(),this.getRolDB()).subscribe(data=>{\n      this.productos=data;\n      this.productosT=data;\n      //console.log(this.productos)\n    }, error=>{\n      console.log(error)\n    })\n  }\n  agregarProductoAVenta(nuevaVentaForm:NgForm){\n    let pv = new ProdcutosVenta(this.codigoNuevaVenta,this.productoSeleccionado.codigo,this.cantidadProducto,this.productoSeleccionado.precio_unitario_venta)\n    this.servicioProductos.nuevoProductoVenta(pv,this.getRolDB()).subscribe(data=>{\n      alert(\"Se ha vendido un nuevo producto!!!\");\n      this.claveBusqueda=\"\"\n      this.traerProductosNuevaVenta();\n      this.traerProductos();\n      this.totalNuevaVenta=this.totalNuevaVenta+(pv.cantidad*pv.precio_unitario);\n      nuevaVentaForm.resetForm();\n      this.productoSeleccionado.cantidad_estanteria=0;\n      this.productoSeleccionado.precio_unitario_venta=0;\n    }, error=>{\n      alert(\"No hay suficiente producto en esta sucursal a la venta.\")\n    })\n    \n    //insertar productos a la venta\n  }\n\n  getRolDB(){\n    let stringUser = localStorage.getItem('usuario');\n    let usuario:Usuario = stringUser? JSON.parse(stringUser):null;\n    let rol = usuario? usuario.rol:0;\n    return rol;\n  }\n  getCaja(){\n    let stringUser = localStorage.getItem('codigocaja');\n    let caja:number = parseInt(stringUser? JSON.parse(stringUser):\"\");\n    return caja;\n  }\n  getIDUser(){\n    let stringUser = localStorage.getItem('usuario');\n    let usuario:Usuario = stringUser? JSON.parse(stringUser):null;\n    let rol = usuario? usuario.identificacion:0;\n    return rol;\n  }\n  getSucursal(){\n    let stringUser = localStorage.getItem('usuario');\n    let usuario:Usuario = stringUser? JSON.parse(stringUser):null;\n    let suc = usuario? usuario.sucursal:0;\n    return suc;\n  }\n\n  getProducto(productos: Producto[], idp: number): Producto {\n    let pr:Producto=new Producto(1,\"\",0,\"\",0,4)\n    productos.forEach(p => {\n      if(p.codigo==idp){\n        pr=p;\n      }\n      \n    });\n    return pr;\n  }\n\n  getClientes(){\n    this.servicioClientes.getClientes(this.getRolDB()).subscribe(data=>{\n      this.clientes=data;\n      this.clientesT=data;\n      console\n      .log(this.clientes)\n    }, error=>{\n      console.log(error)\n    })\n  }\n  \n\n  searchCliente(clave: string) {\n    this.clientes = clave === \"\" ? this.clientesT : this.buscarClientes(clave, this.clientesT);\n  }\n  \n\n  buscarClientes(clave: string, clientes: Cliente[]): Cliente[] {\n    const claveNormalizada = clave.toLowerCase();\n    \n    return clientes.filter(cliente => {\n      return (\n        cliente.identificacion.toString().includes(claveNormalizada) || \n        cliente.nombre.toLowerCase().includes(claveNormalizada)||\n        cliente.nit.toLowerCase().includes(claveNormalizada)||\n        cliente.telefono.toString().includes(claveNormalizada)\n      );\n    });\n  }\n\n  searchVenta(clave: string) {\n    this.ventas = clave === \"\" ? this.ventasT : this.buscarVentas(clave, this.ventasT);\n  }\n  \n\n  buscarVentas(clave: string, vt: Venta[]): Venta[] {\n    const claveNormalizada = clave.toLowerCase();\n    \n    return vt.filter(v => {\n      return (\n        v.codigo.toString().toLowerCase().includes(claveNormalizada)||\n        v.n_cliente.toLowerCase().includes(claveNormalizada)||\n        v.fecha.toLowerCase().includes(claveNormalizada)\n      );\n    });\n  }\n\n  seleccionarCliente(idC:number){\n    this.idCliente=idC;\n    this.mostrarSeleccionarCliente=false;\n    this.productosNuevaVenta=[]\n    this.totalNuevaVenta=0;\n    this.mostrarNuevaVenta=true;\n    this.claveBusqueda=\"\"\n    let v = new Venta(1,this.getIDUser(),\"\",this.getSucursal(),\"\",this.idCliente,\"\",\"\",0,0,\"\",this.getCaja(),0)\n    console.log(v);\n    this.servicioVentas.NuevaVenta(v,this.getRolDB()).subscribe(data=>{\n      this.codigoNuevaVenta=data.codigo_venta\n    },error=>{\n      console.log(error)\n    })\n  }\n\n  hacerPago(){\n    this.mostrarPago=true\n    this.getTarjetaCliente(this.idCliente);\n  }\n\n  pagarVenta(){\n    //aqui logica si aplico descuento y realizar el pago\n    if(this.aplicarChekDescuento){\n      alert(\"Aplicar la logica del descuento!!!!!\");\n    }else{\n      alert(\"Pago realizado!!!!!\");\n      this.servicioVentas.putDineroCobroSinDescuento(this.codigoNuevaVenta,this.getSucursal(),this.getRolDB()).subscribe(data=>{\n        this.mostrarNuevaVenta=false;\n        this.ngOnInit();\n      },error=>{\n        console.log(\"No se pudo hacer el pago \\n\"+error)\n      })\n      \n    }\n  }\n\n\n  searchProducto(clave: string) {\n    this.productos = clave === \"\" ? this.productosT : this.buscarProductos(clave, this.productosT);\n  }\n  \n\n  buscarProductos(clave: string, productos: Producto[]): Producto[] {\n    const claveNormalizada = clave.toLowerCase();\n    \n    return productos.filter(producto => {\n      return (\n        producto.nombre.toLowerCase().includes(claveNormalizada) || \n        producto.codigo.toString().includes(clave)\n      );\n    });\n  }\n\n  cancelarVenta(){\n    this.servicioVentas.cancelarVenta(this.getRolDB(),this.codigoNuevaVenta).subscribe(data=>{\n      alert(\"Se ha cancelado la venta con exito!!\");\n      this.mostrarNuevaVenta=false;\n    })\n  }\n\n  mostrarSelectCliente(){\n    this.mostrarSeleccionarCliente=true;\n    this.claveBusqueda=\"\"\n  }\n\n  infoBotonDescuento:string=\"Aplicar descuento\";\n  aplicaDescuento:boolean = true;\n  cantidadPuntosDescuento:number=0;\n  tarjetaDeCliente!:TarjetasDescuento\n\n  getTarjetaCliente(idc:number){\n    this.idCliente\n    this.servicioTarjetas.getTarjetaByIDCiente(this.getRolDB(),idc).subscribe(data=>{\n      this.tarjetaDeCliente=data;\n      if(!this.tarjetaDeCliente){\n        this.aplicaDescuento=false;\n        console.log(\"No aplica el descuento\")\n      }\n      console.log(this.tarjetaDeCliente)\n    }, error=>{\n      console.log(error);\n      this.aplicaDescuento=false\n    })\n  }\n\n}\n","<div class=\"container mt-2 col-md-10\" *ngIf=\"mostrarDetalles\">\n    <div class=\"row\">\n        <div class=\"col\">\n            <div class=\"card my-10\">\n                <nav class=\"navbar navbar-expand-lg bg-white navbar-light py-3 py-lg-0 px-lg-5\">\n                    <h3 class=\"mt-2 me-4\">Detalles en esta venta</h3>\n                </nav>\n                <div class=\"text-end\">\n                    <button type=\"submit\" class=\"btn btn-danger\"\n                        (click)=\"mostrarDetalles=false\"><i class=\"bi bi-add\"></i> Cerrar</button>\n                </div> \n                <div class=\"card-body\">\n                    \n                </div>\n                <h3>Productos en la venta No.{{ventaDetalle.codigo}}</h3>\n                <table class=\"table table-bordered\">\n                    <thead>\n                        <tr>\n                            <th>#Venta</th>\n                            <th>Codigo producto</th>\n                            <th>Nombre producto</th>\n                            <th>Cantidad</th>\n                            <th>Precio unitario</th>\n                            <th>Subtotal</th>\n                        </tr>\n                    </thead>\n                    <tbody>\n                        <tr *ngFor=\"let pc of productosNuevaVenta; let i = index\">\n                            <td>{{pc.id_venta}}</td>\n                            <td>{{pc.id_producto}}</td>\n                            <td>{{pc.producto}}</td>\n                            <td>{{pc.cantidad}}</td>\n                            <td>{{pc.precio_unitario}}</td>\n                            <td>{{pc.subtotal}}</td>\n                        </tr>\n                        \n                    </tbody>\n                </table>\n                <h3>Precio total {{ventaDetalle.total_sin_descuento}}</h3>\n                <h3>Precio total con descuento {{ventaDetalle.total_con_descuento}}</h3>\n            </div>\n        </div>\n    </div>\n</div>\n\n\n<div class=\"container mt-2 col-md-10\" *ngIf=\"mostrarNuevaVenta\">\n    <div class=\"row\">\n        <div class=\"col\">\n            <div class=\"card my-10\">\n                <nav class=\"navbar navbar-expand-lg bg-white navbar-light py-3 py-lg-0 px-lg-5\">\n                    <h3 class=\"mt-2 me-4\">Nueva Venta</h3>\n                </nav>\n                <div class=\"text-end\">\n                    <button type=\"submit\" class=\"btn btn-warning\"\n                        (click)=\"dejarDeMostrarNuevaVenta()\"><i class=\"bi bi-add\"></i> Cerrar</button>\n                </div> \n\n                <div class=\"text-init\">\n                    <button type=\"submit\" class=\"btn btn-danger\"\n                        (click)=\"cancelarVenta()\"><i class=\"bi bi-add\"></i> Cancelar venta</button>\n                </div> \n                <br>\n                \n                <div class=\"card-body\">\n                    <form (ngSubmit)=\"agregarProductoAVenta(nuevaVentaForm)\"  #nuevaVentaForm=\"ngForm\">\n                        <div class=\"form-group row\">\n                            <label for=\"busqueda\" class=\"col-md-4 col-form-label\">Búsqueda totales: {{productos.length}}</label>\n                            <div class=\"col-md-8\">\n                                <div class=\"input-group\">\n                                    <input type=\"text\" class=\"form-control\" id=\"busqueda\"name=\"busqueda\" \n                                        placeholder=\"Buscar productos...\" [(ngModel)]=\"claveBusqueda\" \n                                        (input)=\"searchProducto(claveBusqueda)\"\n                                    >\n                                    <div class=\"input-group-append\">\n                                        <span class=\"input-group-text\">\n                                            <i class=\"fas fa-search\"></i>\n                                        </span>\n                                    </div>\n                                </div>\n                            </div>\n                        </div>\n                        <div class=\"form-group\">\n                            <label for=\"rol\">Seleccione el producto:</label>\n                            <select class=\"form-select\" aria-label=\"Default select example\" id=\"combo\"  name=\"comoboProductos\" required [(ngModel)]=\"idProductoSeleccionado\" (click)=\"mostrarInfoProducto()\">\n                                <option *ngFor=\"let pr of productos; let i = index\" [value]=\"pr.codigo\">C.{{pr.codigo}}:  {{pr.nombre}}</option>\n                            </select>\n                        </div>\n                        <br>\n                        <h4>Cantidad en estanteria: {{productoSeleccionado.cantidad_estanteria}}</h4><br>\n                        <h4>Precio del producto: Q.{{productoSeleccionado.precio_unitario_venta}}</h4>\n                        <div class=\"form-group\">\n                            <label for=\"cantidad\">Ingrese la cantidad del producto:</label>\n                            <input type=\"number\" class=\"form-control\" name=\"cantidad\" [(ngModel)]=\"cantidadProducto\"  required>\n                        </div>                        \n                        <br>\n                        <div>\n                            <button type=\"submit\" class=\"btn btn-success\"\n                                [disabled]=\"!nuevaVentaForm.form.valid\"><i class=\"bi bi-add\"></i> Agregar</button>\n                        </div> \n                    </form>\n                </div>\n                <h3>Productos en la venta No.{{codigoNuevaVenta}}</h3>\n                <table class=\"table table-bordered\">\n                    <thead>\n                        <tr>\n                            <th># Venta</th>\n                            <th>Codigo producto</th>\n                            <th>Nombre producto</th>\n                            <th>Cantidad</th>\n                            <th>Precio unitario</th>\n                            <th>Subtotal</th>\n                        </tr>\n                    </thead>\n                    <tbody>\n                        <tr *ngFor=\"let pc of productosNuevaVenta; let i = index\">\n                            <td>{{pc.id_venta}}</td>\n                            <td>{{pc.id_producto}}</td>\n                            <td>{{pc.producto}}</td>\n                            <td>{{pc.cantidad}}</td>\n                            <td>{{pc.precio_unitario}}</td>\n                            <td>{{pc.subtotal}}</td>\n                        </tr>\n                        \n                    </tbody>\n                </table>\n                <h3>Precio total {{totalNuevaVenta}}</h3>\n                <div class=\"text-center\">\n                    <button type=\"submit\" class=\"btn btn-primary btn-lg\"\n                        [disabled]=\"totalNuevaVenta <= 0\" (click)=\"hacerPago()\">\n                        <i class=\"bi bi-cash\"></i> Realizar cobro\n                    </button>\n                </div>\n                \n                <div class=\"form-group mt-3\" *ngIf=\"mostrarPago\">\n                    <div *ngIf=\"aplicaDescuento\" >\n                        <input type=\"checkbox\" id=\"activo\" [(ngModel)]=\"aplicarChekDescuento\"name=\"activo\">\n                        <label for=\"activo\">{{infoBotonDescuento}}</label>\n                        <div class=\"form-group mt-3\" *ngIf=\"aplicarChekDescuento\">\n                            <input type=\"number\" class=\"form-control\" id=\"cantidadDesc\"name=\"cantidadDesc\" \n                                        [(ngModel)]=\"cantidadPuntosDescuento\" \n                            >\n                        </div>\n                    </div>\n                    <label for=\"activo\" *ngIf=\"!aplicaDescuento\" >No aplica Descuento</label>\n                    <label >Cantidad a cancelar: {{ventaDetalle.total_sin_descuento - cantidadPuntosDescuento}}</label>\n                    <br><br><br><br>\n                    <div class=\"text-center\">\n                        <button type=\"submit\" class=\"btn btn-primary btn-lg\"\n                             (click)=\"pagarVenta()\">\n                             <i class=\"bi bi-check-all\"></i> Hacer pago\n                        </button>\n                    </div> \n                </div>\n                        \n            </div>\n        </div>\n    </div>\n</div>\n\n\n<div class=\"container\" *ngIf=\"mostrarSeleccionarCliente\" >\n    <div class=\"card\">\n        <h3>Seleccione un cliente para realizar la venta </h3><br>\n        <div class=\"form-group row\">\n            <label for=\"busqueda\" class=\"col-md-4 col-form-label\">Búsqueda totales: {{clientes.length}}</label>\n            <div class=\"col-md-8\">\n                <div class=\"input-group\">\n                    <input type=\"text\" class=\"form-control\" id=\"busqueda\"name=\"busqueda\" \n                        placeholder=\"Buscar clientes...\" [(ngModel)]=\"claveBusqueda\" \n                        (input)=\"searchCliente(claveBusqueda)\"\n                    >\n                    <div class=\"input-group-append\">\n                        <span class=\"input-group-text\">\n                            <i class=\"fas fa-search\"></i>\n                        </span>\n                    </div>\n                </div>\n            </div>\n        </div>\n        \n        <br>\n        <table class=\"table table-bordered\">\n            <thead>\n                <tr>\n                    <th>Identificacion</th>\n                    <th>Nombre</th>\n                    <th>Telefono</th>\n                    <th>Nit</th>\n                    <th class=\"text-center\">ACCIONES</th>\n                </tr>\n            </thead>\n            <tbody>\n                <tr *ngFor=\"let c of clientes; let i = index\">\n                    <td>{{c.identificacion}}</td>\n                    <td>{{c.nombre}}</td>\n                    <td>{{c.telefono}}</td>\n                    <td>{{c.nit}}</td>\n                    <td class=\"text-center\">\n                        <button class=\"btn btn-success \" (click)=\"seleccionarCliente(c.identificacion)\"> <i class=\"bi bi-check2\"></i>     Seleccionar</button>\n                    </td>\n                </tr>\n            </tbody>\n        </table>\n    </div>\n</div>\n\n\n\n\n\n<div class=\"container\" *ngIf=\"!mostrarNuevaVenta && !mostrarDetalles && !mostrarSeleccionarCliente\" >\n    <div class=\"card\">\n        <h3>Totales ({{ventas.length}}) </h3>\n        <div class=\"text-end\">\n            <button class=\"btn btn-primary ms-3 mt-2\" aria-label=\"Agregar compra\" (click)=\"mostrarSelectCliente()\">\n                <i class=\"bi bi-cart-plus-fill bi-xxl\"></i> Agregar\n            </button>\n        </div><br>\n        <div class=\"form-group row\">\n            <label for=\"busqueda\" class=\"col-md-4 col-form-label\">Búsqueda totales: {{ventas.length}}</label>\n            <div class=\"col-md-8\">\n                <div class=\"input-group\">\n                    <input type=\"text\" class=\"form-control\" id=\"busqueda\"name=\"busqueda\" \n                        placeholder=\"Buscar venta...\" [(ngModel)]=\"claveBusqueda\" \n                        (input)=\"searchVenta(claveBusqueda)\"\n                    >\n                    <div class=\"input-group-append\">\n                        <span class=\"input-group-text\">\n                            <i class=\"fas fa-search\"></i>\n                        </span>\n                    </div>\n                </div>\n            </div>\n        </div>\n        <br>\n        <table class=\"table table-bordered\">\n            <thead>\n                <tr>\n                    <th>Codigo</th>\n                    <th>Cliente</th>\n                    <th>Sucursal</th>\n                    <th>Caja</th>\n                    <th>Fecha</th>\n                    <th>Total</th>\n                    <th>T/C descuento</th>\n                    <th class=\"text-center\">ACCIONES</th>\n                </tr>\n            </thead>\n            <tbody>\n                <tr *ngFor=\"let v of ventas; let i = index\">\n                    <td>{{v.codigo}}</td>\n                    <td>{{v.n_cliente}}</td>\n                    <td>{{v.n_sucursal}}</td>\n                    <td>Caja {{v.caja}}</td>\n                    <td>{{v.fecha}}</td>\n                    <td>{{v.total_sin_descuento}}</td>\n                    <td>{{v.total_con_descuento}}</td>\n                    <td class=\"text-center\">\n                        <button class=\"btn btn-warning \" (click)=\"verDetalles(v)\"> <i class=\"bi bi-eye\"></i>      Detalles</button>\n                    </td>\n                </tr>\n            </tbody>\n        </table>\n    </div>\n</div>\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}